(self.webpackChunktable_talk_client=self.webpackChunktable_talk_client||[]).push([[285],{1497:(e,s,a)=>{"use strict";var l=a(3218);function t(){}function r(){}r.resetWarningCache=t,e.exports=function(){function e(e,s,a,t,r,i){if(i!==l){var n=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw n.name="Invariant Violation",n}}function s(){return e}e.isRequired=e;var a={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:s,element:e,elementType:e,instanceOf:s,node:e,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:r,resetWarningCache:t};return a.PropTypes=a,a}},3218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3670:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>D});var l=a(5043),t=a(3519),r=a(4117),i=a(184),n=a(3216),c=a(5475),o=a(9926),d=a(2555),p=a(8298);const h="MealFilters_filtersCard__r0HIU",m="MealFilters_filtersHeader__8zOkH",u="MealFilters_toggleBtn__wbbAy",_="MealFilters_compactBar__7SJDo",x="MealFilters_chip__OQR3-",j="MealFilters_chipValue__db4lA",f="MealFilters_filtersGrid__VT4yP",y="MealFilters_select__9PXKf",v="MealFilters_resetButton__CCT7G";var g=a(5950),T=a(4935),N=a(579);const S=e=>{let{filters:s,onFilterChange:a}=e;const{t:t}=(0,r.Bd)(),{getMealTypeOptions:i,getMealModeOptions:n}=(0,T.j)(),c=e=>{const{name:s,value:l}=e.target;a(e=>(0,d.A)((0,d.A)({},e),{},{[s]:l}))},[o,S]=(0,l.useState)(!0);return(0,N.jsxs)("div",{className:h,children:[(0,N.jsxs)("div",{className:m,children:[(0,N.jsx)("h4",{children:t("meals.filters.title")}),(0,N.jsxs)("div",{children:[(0,N.jsx)("button",{type:"button",className:u,onClick:()=>S(e=>!e),"aria-expanded":o,children:o?"Nascondi":"Mostra filtri"}),(0,N.jsx)("button",{type:"button",className:v,onClick:()=>{a(()=>({type:"",mealType:"",status:"",sortBy:"date"}))},children:t("meals.filters.resetFilters")})]})]}),!o&&(0,N.jsxs)("div",{className:_,children:[(0,N.jsxs)("span",{className:x,children:[t("meals.filters.mealType"),": ",(0,N.jsx)("span",{className:j,children:s.type||t("meals.filters.allTypes")})]}),(0,N.jsxs)("span",{className:x,children:[t("meals.filters.mode"),": ",(0,N.jsx)("span",{className:j,children:s.mealType||t("meals.filters.allModes")})]}),(0,N.jsxs)("span",{className:x,children:[t("meals.filters.status"),": ",(0,N.jsx)("span",{className:j,children:s.status||t("meals.filters.allStatus")})]}),(0,N.jsxs)("span",{className:x,children:[t("meals.filters.sortBy"),": ",(0,N.jsx)("span",{className:j,children:"participants"===s.sortBy?t("meals.filters.participantsMost"):t("meals.filters.dateClosest")})]})]}),o&&(0,N.jsx)(p.A,{children:(0,N.jsxs)("div",{className:f,children:[(0,N.jsxs)(p.A.Group,{children:[(0,N.jsx)(p.A.Label,{children:t("meals.filters.mealType")}),(0,N.jsxs)(p.A.Select,{className:y,name:"type",value:s.type,onChange:c,children:[(0,N.jsx)("option",{value:"",children:t("meals.filters.allTypes")}),i().map(e=>(0,N.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,N.jsxs)(p.A.Group,{children:[(0,N.jsx)(p.A.Label,{children:t("meals.filters.mode")}),(0,N.jsxs)(p.A.Select,{className:y,name:"mealType",value:s.mealType,onChange:c,children:[(0,N.jsx)("option",{value:"",children:t("meals.filters.allModes")}),n().map(e=>(0,N.jsxs)("option",{value:e.value,children:[e.label," ",e.value===g.x6.VIRTUAL?"\ud83c\udfa5":"\ud83d\udccd"]},e.value))]})]}),(0,N.jsxs)(p.A.Group,{children:[(0,N.jsx)(p.A.Label,{children:t("meals.filters.status")}),(0,N.jsxs)(p.A.Select,{className:y,name:"status",value:s.status,onChange:c,children:[(0,N.jsx)("option",{value:"",children:t("meals.filters.allStatus")}),(0,N.jsx)("option",{value:"upcoming",children:t("meals.mealStatus.upcoming")}),(0,N.jsx)("option",{value:"ongoing",children:t("meals.mealStatus.ongoing")})]})]}),(0,N.jsxs)(p.A.Group,{children:[(0,N.jsx)(p.A.Label,{children:t("meals.filters.sortBy")}),(0,N.jsxs)(p.A.Select,{className:y,name:"sortBy",value:s.sortBy,onChange:c,children:[(0,N.jsx)("option",{value:"date",children:t("meals.filters.dateClosest")}),(0,N.jsx)("option",{value:"participants",children:t("meals.filters.participantsMost")})]})]})]})})]})};var M=a(4131),b=a(2179),A=a(7352);const C="SearchMealsPage_page__VuhjX",P="SearchMealsPage_header__4f00K",F="SearchMealsPage_pageTitle__YslK5",B="SearchMealsPage_createButton__zXmi8",k="SearchMealsPage_searchBar__HsdbF",O="SearchMealsPage_searchContainer__1n540",w="SearchMealsPage_searchIcon__4GkFP",G="SearchMealsPage_searchInput__jHXlm",I="SearchMealsPage_filtersSection__J-xGy",L="SearchMealsPage_resultsSection__LW2oF",E="SearchMealsPage_infoText__ZD6Am",R="SearchMealsPage_errorText__lf0tv",D=()=>{const{t:e}=(0,r.Bd)(),s=(0,n.Zp)(),{meals:a,loading:d,error:p}=(0,o.w)(),[h,m]=(0,l.useState)(""),[u,_]=(0,l.useState)({type:"",mealType:"",status:"",sortBy:"date"}),[x,j]=(0,l.useState)(null),[f,y]=(0,l.useState)(!1),[v,g]=(0,l.useState)("");(0,l.useEffect)(()=>{if(!h.trim())return j(null),void g("");y(!0),g("");const s=setTimeout(async()=>{try{const e=await b.A.searchMeals(h);j(e.data)}catch(s){g(e("meals.searchError"))}finally{y(!1)}},400);return()=>clearTimeout(s)},[h,e]);const T=(0,l.useMemo)(()=>{let e=Array.isArray(x)?x:a||[];return u.type&&(e=e.filter(e=>e.type===u.type)),u.mealType&&(e=e.filter(e=>e.mealType===u.mealType)),u.status&&(e=e.filter(e=>e.status===u.status)),e="participants"===u.sortBy?[...e].sort((e,s)=>{var a,l;return((null===(a=s.participants)||void 0===a?void 0:a.length)||0)-((null===(l=e.participants)||void 0===l?void 0:l.length)||0)}):[...e].sort((e,s)=>new Date(e.date)-new Date(s.date)),e},[a,x,u]);return(0,N.jsxs)(t.A,{fluid:!0,className:C,children:[(0,N.jsxs)("div",{className:P,children:[(0,N.jsx)(A.A,{onClick:()=>s(-1)}),(0,N.jsx)("h1",{className:F,children:e("meals.searchTitle","Cerca TableTalk")})]}),(0,N.jsx)(c.N_,{to:"/meals/create",className:B,children:e("meals.createButton")}),(0,N.jsx)("div",{className:k,children:(0,N.jsxs)("div",{className:O,children:[(0,N.jsx)(i.KSO,{className:w}),(0,N.jsx)("input",{autoFocus:!0,type:"text",placeholder:e("meals.searchPlaceholder"),value:h,onChange:e=>m(e.target.value),className:G})]})}),(0,N.jsx)("div",{className:I,children:(0,N.jsx)(S,{filters:u,onFilterChange:_})}),(0,N.jsxs)("div",{className:L,children:[f&&(0,N.jsx)("div",{className:E,children:e("meals.loading")}),v&&(0,N.jsx)("div",{className:R,children:v}),(0,N.jsx)(M.A,{meals:T}),0===(null===T||void 0===T?void 0:T.length)&&!f&&!v&&(0,N.jsx)("div",{className:E,children:e("meals.noMealsFound",{searchTerm:h})})]})]})}},5173:(e,s,a)=>{e.exports=a(1497)()}}]);
//# sourceMappingURL=285.9a9c8f40.chunk.js.map