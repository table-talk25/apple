{"version":3,"file":"static/js/784.340891fc.chunk.js","mappings":"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","sources":["components/maps/OpenStreetMapComponent.jsx","../node_modules/react-bootstrap/esm/Row.js","webpack://table-talk-client/./src/components/common/BackButton/BackButton.module.css?c17f","components/common/BackButton/index.js","webpack://table-talk-client/./src/components/meals/MealForm/MealForm.module.css?14a4","webpack://table-talk-client/./src/components/meals/TopicInput/TopicInput.module.css?e3f5","components/meals/TopicInput/index.js","components/meals/MealForm/index.js","services/sanitizationService.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup, useMapEvents, useMap } from 'react-leaflet';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\n\n// Fix per icone marker di default Leaflet\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',\n  iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\n  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',\n});\n\n// Componente per centrare la mappa su una posizione specifica\nfunction FlyToMarker({ position, zoom }) {\n  const map = useMap();\n  useEffect(() => {\n    if (position && position.lat && position.lng) {\n      const targetZoom = zoom || map.getZoom();\n      // Usa flyTo per animazione smooth invece di setView\n      map.flyTo([position.lat, position.lng], targetZoom, {\n        duration: 1.5 // Animazione di 1.5 secondi\n      });\n    }\n  }, [position?.lat, position?.lng, zoom, map]);\n  return null;\n}\n\n// Componente per reagire ai cambiamenti di center prop\nfunction CenterUpdater({ center, zoom }) {\n  const map = useMap();\n  useEffect(() => {\n    if (center && Array.isArray(center) && center.length === 2) {\n      const [lat, lng] = center;\n      const targetZoom = zoom || map.getZoom();\n      map.flyTo([lat, lng], targetZoom, {\n        duration: 1.5\n      });\n    }\n  }, [center, zoom, map]);\n  return null;\n}\n\n// Componente per gestire click sulla mappa\nfunction LocationPicker({ onLocationSelect, onMapClick }) {\n  useMapEvents({\n    click(e) {\n      const { lat, lng } = e.latlng;\n      // Se c'√® onMapClick, chiamalo (per chiudere card/anteprima)\n      if (onMapClick) {\n        onMapClick();\n      }\n      // Se c'√® onLocationSelect, chiamalo (per selezionare posizione)\n      if (onLocationSelect) {\n        onLocationSelect({ lat, lng });\n      }\n    },\n  });\n  return null;\n}\n\nconst OpenStreetMapComponent = ({ \n  meals = [], \n  markers = [], // Nuova prop per markers dalla MapPage\n  onLocationSelect, \n  onMarkerClick, // Nuova prop per gestire click sui marker\n  onMapClick, // Nuova prop per gestire click sulla mappa\n  selectedLocation,\n  userLocation = null, // Nuova prop per posizione utente\n  zoom = 13, // Nuova prop per zoom\n  height = '400px',\n  width = '100%',\n  center = [45.4642, 9.1900] // Milano di default\n}) => {\n  // Verifica che Leaflet sia caricato correttamente\n  useEffect(() => {\n    if (typeof window !== 'undefined' && !window.L) {\n      console.error('‚ùå [Map] Leaflet non √® disponibile');\n    } else {\n      console.log('‚úÖ [Map] Leaflet caricato correttamente');\n    }\n  }, []);\n\n  return (\n    <div style={{ width: '100%', height: '100%', position: 'relative' }}>\n      {/* Mappa */}\n      <MapContainer \n        center={center} \n        zoom={zoom} \n        style={{ height, width, borderRadius: '8px' }}\n        whenReady={() => {\n          console.log('‚úÖ [Map] Mappa Leaflet pronta');\n        }}\n        whenCreated={(mapInstance) => {\n          console.log('‚úÖ [Map] Istanza mappa creata');\n        }}\n      >\n        <TileLayer\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n          attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n          errorTileUrl=\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='256' height='256'%3E%3Crect fill='%23ddd' width='256' height='256'/%3E%3Ctext fill='%23999' font-family='sans-serif' font-size='18' x='50%25' y='50%25' text-anchor='middle' dominant-baseline='middle'%3EErrore caricamento mappa%3C/text%3E%3C/svg%3E\"\n        />\n        \n        {/* Aggiorna il centro quando cambia il prop center */}\n        <CenterUpdater center={center} zoom={zoom} />\n        \n        {/* Gestione click per selezionare posizione e chiudere card */}\n        <LocationPicker onLocationSelect={onLocationSelect} onMapClick={onMapClick} />\n        \n        {/* Centra la mappa sulla posizione selezionata */}\n        {selectedLocation && <FlyToMarker position={selectedLocation} zoom={zoom} />}\n        \n        {/* Marker per posizione utente */}\n        {userLocation && (\n          <Marker \n            position={[userLocation.lat, userLocation.lng]}\n            icon={L.icon({\n              iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-blue.png',\n              shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',\n              iconSize: [25, 41],\n              iconAnchor: [12, 41],\n              popupAnchor: [1, -34],\n              shadowSize: [41, 41]\n            })}\n          >\n            <Popup>\n              üìç <strong>La tua posizione</strong>\n            </Popup>\n          </Marker>\n        )}\n        \n        {/* Marker per location selezionata */}\n        {selectedLocation && (\n          <Marker position={[selectedLocation.lat, selectedLocation.lng]}>\n            <Popup>\n              üìç <strong>Posizione selezionata</strong><br />\n              {selectedLocation.address || `${selectedLocation.lat.toFixed(4)}, ${selectedLocation.lng.toFixed(4)}`}\n            </Popup>\n          </Marker>\n        )}\n        \n        {/* Marker per i pasti dalla prop markers (usata da MapPage) */}\n        {markers.map((marker) => (\n          <Marker \n            key={marker.id} \n            position={[marker.lat, marker.lng]}\n            eventHandlers={{\n              click: () => {\n                if (onMarkerClick) onMarkerClick(marker.id);\n              },\n            }}\n          >\n            <Popup>\n              <div style={{ minWidth: '200px' }}>\n                <h3 style={{ margin: '0 0 8px 0', color: '#FF6B35' }}>\n                  üçΩÔ∏è {marker.title || marker.name}\n                </h3>\n                {marker.price && (\n                  <p style={{ margin: '4px 0' }}>\n                    üí∞ ‚Ç¨{marker.price}\n                  </p>\n                )}\n                {marker.type && (\n                  <p style={{ margin: '4px 0', color: '#666' }}>\n                    üìÖ {marker.type}\n                  </p>\n                )}\n              </div>\n            </Popup>\n          </Marker>\n        ))}\n        \n        {/* Marker per i pasti esistenti (compatibilit√† con vecchia API) */}\n        {meals.map(meal => (\n          <Marker \n            key={meal.id} \n            position={[meal.lat, meal.lng]}\n            eventHandlers={{\n              click: () => {\n                if (onMarkerClick) onMarkerClick(meal.id);\n              },\n            }}\n          >\n            <Popup>\n              <div style={{ minWidth: '200px' }}>\n                <h3 style={{ margin: '0 0 8px 0', color: '#FF6B35' }}>\n                  üçΩÔ∏è {meal.name}\n                </h3>\n                <p style={{ margin: '4px 0' }}>\n                  üìç {meal.restaurant || meal.address}\n                </p>\n                <p style={{ margin: '4px 0' }}>\n                  üë• {meal.participants || 0} partecipanti\n                </p>\n                <p style={{ margin: '4px 0' }}>\n                  üìÖ {meal.date}\n                </p>\n                <button\n                  onClick={() => window.open(`/meal/${meal.id}`, '_blank')}\n                  style={{\n                    background: '#FF6B35',\n                    color: 'white',\n                    border: 'none',\n                    padding: '8px 16px',\n                    borderRadius: '6px',\n                    cursor: 'pointer',\n                    marginTop: '8px'\n                  }}\n                >\n                  Partecipa al TableTalk\n                </button>\n              </div>\n            </Popup>\n          </Marker>\n        ))}\n      </MapContainer>\n    </div>\n  );\n};\n\nexport default OpenStreetMapComponent;\n","\"use client\";\n\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport { useBootstrapPrefix, useBootstrapBreakpoints, useBootstrapMinBreakpoint } from './ThemeProvider';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst Row = /*#__PURE__*/React.forwardRef(({\n  bsPrefix,\n  className,\n  // Need to define the default \"as\" during prop destructuring to be compatible with styled-components github.com/react-bootstrap/react-bootstrap/issues/3595\n  as: Component = 'div',\n  ...props\n}, ref) => {\n  const decoratedBsPrefix = useBootstrapPrefix(bsPrefix, 'row');\n  const breakpoints = useBootstrapBreakpoints();\n  const minBreakpoint = useBootstrapMinBreakpoint();\n  const sizePrefix = `${decoratedBsPrefix}-cols`;\n  const classes = [];\n  breakpoints.forEach(brkPoint => {\n    const propValue = props[brkPoint];\n    delete props[brkPoint];\n    let cols;\n    if (propValue != null && typeof propValue === 'object') {\n      ({\n        cols\n      } = propValue);\n    } else {\n      cols = propValue;\n    }\n    const infix = brkPoint !== minBreakpoint ? `-${brkPoint}` : '';\n    if (cols != null) classes.push(`${sizePrefix}${infix}-${cols}`);\n  });\n  return /*#__PURE__*/_jsx(Component, {\n    ref: ref,\n    ...props,\n    className: classNames(className, decoratedBsPrefix, ...classes)\n  });\n});\nRow.displayName = 'Row';\nexport default Row;","// extracted by mini-css-extract-plugin\nexport default {\"backButton\":\"BackButton_backButton__hBNQM\"};","// File: src/components/common/BackButton/index.js\n\nimport React from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { FaArrowLeft } from 'react-icons/fa';\nimport styles from './BackButton.module.css';\n\nconst BackButton = ({ className = '' }) => {\n  const navigate = useNavigate();\n\n  const handleBack = () => {\n    navigate(-1);\n  };\n\n  return (\n    <button onClick={handleBack} className={`${styles.backButton} ${className}`}>\n      <FaArrowLeft style={{ marginRight: 8 }} />\n      Torna indietro\n    </button>\n  );\n};\n\nexport default BackButton;","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"MealForm_form__iyuod\",\"formGroup\":\"MealForm_formGroup__Nagwi\",\"formLabel\":\"MealForm_formLabel__EuahF\",\"formControl\":\"MealForm_formControl__QOV2v\",\"dateInputContainer\":\"MealForm_dateInputContainer__tCElf\",\"dateHelperButton\":\"MealForm_dateHelperButton__ypazG\",\"formSelect\":\"MealForm_formSelect__qfqPi\",\"formCheck\":\"MealForm_formCheck__GCWf7\",\"typeSelector\":\"MealForm_typeSelector__mfJc5\",\"typeButton\":\"MealForm_typeButton__KyHCF\",\"active\":\"MealForm_active__Hpn7f\",\"typeIcon\":\"MealForm_typeIcon__XJPIu\",\"typeText\":\"MealForm_typeText__7CnAo\",\"typeDescription\":\"MealForm_typeDescription__t2zNS\",\"typeInfo\":\"MealForm_typeInfo__pB1+E\",\"visibilitySelector\":\"MealForm_visibilitySelector__WKtUp\",\"visibilityButton\":\"MealForm_visibilityButton__D2Hp1\",\"visibilityIcon\":\"MealForm_visibilityIcon__FlV5b\",\"visibilityText\":\"MealForm_visibilityText__dnQrt\",\"visibilityDescription\":\"MealForm_visibilityDescription__FL8e4\",\"visibilityInfo\":\"MealForm_visibilityInfo__-fbWG\",\"mapContainer\":\"MealForm_mapContainer__whBqK\",\"locationInfo\":\"MealForm_locationInfo__hHdUX\",\"submitButton\":\"MealForm_submitButton__fUBD0\",\"stickyActions\":\"MealForm_stickyActions__wBnhW\",\"cancelButton\":\"MealForm_cancelButton__thg-a\",\"error\":\"MealForm_error__TbffJ\",\"success\":\"MealForm_success__pUq4n\",\"loading\":\"MealForm_loading__6DqYq\"};","// extracted by mini-css-extract-plugin\nexport default {\"topicInputContainer\":\"TopicInput_topicInputContainer__NfIJd\",\"topicTag\":\"TopicInput_topicTag__HTw1U\",\"removeTagButton\":\"TopicInput_removeTagButton__sDCPm\",\"topicInput\":\"TopicInput_topicInput__WbbZc\",\"inputError\":\"TopicInput_inputError__VAq+v\",\"hasError\":\"TopicInput_hasError__0Xkbf\",\"errorMessage\":\"TopicInput_errorMessage__leuM0\",\"fadeIn\":\"TopicInput_fadeIn__1ShrF\"};","import React, { useState, useEffect } from 'react';\nimport styles from './TopicInput.module.css';\n\nconst TopicInput = ({ topics, setTopics, onValidationChange }) => {\n  const [inputValue, setInputValue] = useState('');\n  const [error, setError] = useState(''); // üîí STATO ERRORE: Per feedback visivo\n\n  // üîí PULIZIA AUTOMATICA: Esegui pulizia quando il componente si monta e quando cambiano i topics\n  useEffect(() => {\n    cleanTopics();\n  }, []); // Solo al mount\n\n  // üîí NOTIFICA VALIDAZIONE: Comunica lo stato di validazione al componente padre\n  useEffect(() => {\n    if (onValidationChange) {\n      const hasValidTopics = topics.length > 0 && topics.every(topic => {\n        const trimmedTopic = topic.trim();\n        return trimmedTopic.length >= 2 && \n               trimmedTopic.length <= 50 && \n               !/^\\s+$/.test(trimmedTopic);\n      });\n      \n      onValidationChange(hasValidTopics);\n    }\n  }, [topics, onValidationChange]);\n\n  // üîí VALIDAZIONE TOPICS: Funzione per validare un nuovo argomento\n  const validateTopic = (topic) => {\n    if (typeof topic !== 'string') {\n      return { isValid: false, error: 'L\\'argomento deve essere una stringa valida' };\n    }\n    \n    const trimmedTopic = topic.trim();\n    \n    // Controllo lunghezza minima (almeno 2 caratteri)\n    if (trimmedTopic.length < 2) {\n      return { isValid: false, error: 'L\\'argomento deve essere di almeno 2 caratteri' };\n    }\n    \n    // Controllo lunghezza massima (massimo 50 caratteri)\n    if (trimmedTopic.length > 50) {\n      return { isValid: false, error: 'L\\'argomento non pu√≤ superare i 50 caratteri' };\n    }\n    \n    // Controllo duplicati (case-insensitive)\n    const isDuplicate = topics.some(existingTopic => \n      existingTopic.toLowerCase() === trimmedTopic.toLowerCase()\n    );\n    \n    if (isDuplicate) {\n      return { isValid: false, error: 'Questo argomento √® gi√† presente' };\n    }\n    \n    // Controllo caratteri speciali non desiderati\n    const hasOnlySpaces = /^\\s+$/.test(trimmedTopic);\n    if (hasOnlySpaces) {\n      return { isValid: false, error: 'L\\'argomento non pu√≤ contenere solo spazi' };\n    }\n    \n    // Controllo caratteri validi (solo lettere, numeri, spazi e caratteri accentati)\n    const hasValidCharacters = /^[\\w\\s\\u00C0-\\u017F]+$/i.test(trimmedTopic);\n    if (!hasValidCharacters) {\n      return { isValid: false, error: 'L\\'argomento pu√≤ contenere solo lettere, numeri e spazi' };\n    }\n    \n    return { isValid: true, topic: trimmedTopic };\n  };\n\n  const handleKeyDown = (e) => {\n    // Se preme \"Invio\" o \"Virgola\"\n    if (e.key === 'Enter' || e.key === ',') {\n      e.preventDefault(); // Impedisce al form di essere inviato o di scrivere la virgola\n      \n      // üîí VALIDAZIONE ROBUSTA: Controllo completo prima dell'aggiunta\n      const validation = validateTopic(inputValue);\n      \n      if (validation.isValid) {\n        if (topics.length < 5) { // Limite di 5 argomenti\n          setTopics([...topics, validation.topic]);\n          setInputValue(''); // Pulisci l'input solo se valido\n          setError(''); // üîí Pulisci errori precedenti\n        } else {\n          const limitError = 'Limite massimo di 5 argomenti raggiunto';\n          console.warn(`‚ö†Ô∏è [TopicInput] ${limitError}`);\n          setError(limitError);\n        }\n      } else {\n        // üîí FEEDBACK ERRORE: Mostra messaggio di errore visivo\n        console.warn(`‚ö†Ô∏è [TopicInput] Argomento non valido: ${validation.error}`);\n        setError(validation.error);\n      }\n    }\n  };\n\n  // üîí PULIZIA AUTOMATICA: Rimuove argomenti vuoti o non validi\n  const cleanTopics = () => {\n    if (!Array.isArray(topics) || topics.length === 0) return;\n    \n    const cleanedTopics = topics.filter(topic => {\n      if (typeof topic !== 'string') return false;\n      \n      const trimmedTopic = topic.trim();\n      // üîí VALIDAZIONE COMPLETA: Controlla lunghezza e caratteri\n      return trimmedTopic.length >= 2 && \n             trimmedTopic.length <= 50 && \n             !/^\\s+$/.test(trimmedTopic) &&\n             !/^[^\\w\\s]+$/.test(trimmedTopic) && // Non solo caratteri speciali\n             /^[\\w\\s\\u00C0-\\u017F]+$/i.test(trimmedTopic); // Solo lettere, numeri, spazi e caratteri accentati\n    });\n    \n    // Se ci sono stati cambiamenti, aggiorna la lista\n    if (cleanedTopics.length !== topics.length) {\n      console.log(`üßπ [TopicInput] Puliti ${topics.length - cleanedTopics.length} argomenti non validi`);\n      setTopics(cleanedTopics);\n    }\n  };\n\n  const removeTopic = (topicToRemove) => {\n    setTopics(topics.filter(topic => topic !== topicToRemove));\n  };\n\n  return (\n    <div className={`${styles.topicInputContainer} ${error ? styles.hasError : ''}`}>\n      {topics.map((topic, index) => (\n        <div key={index} className={styles.topicTag}>\n          {topic}\n          <button \n            type=\"button\" \n            className={styles.removeTagButton} \n            onClick={() => removeTopic(topic)}\n          >\n            &times;\n          </button>\n        </div>\n      ))}\n      <input\n        type=\"text\"\n        value={inputValue}\n        onChange={(e) => {\n          setInputValue(e.target.value);\n          // üîí PULIZIA ERRORE: Rimuovi errori quando l'utente digita\n          if (error) setError('');\n        }}\n        onKeyDown={handleKeyDown}\n        placeholder={topics.length < 5 ? 'Aggiungi un argomento...' : 'Massimo 5 argomenti'}\n        className={`${styles.topicInput} ${error ? styles.inputError : ''}`}\n        disabled={topics.length >= 5}\n      />\n      {/* üîí FEEDBACK ERRORE: Mostra messaggio di errore sotto l'input */}\n      {error && (\n        <div className={styles.errorMessage}>\n          ‚ö†Ô∏è {error}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default TopicInput;","// File: /src/components/meals/MealForm.js (Versione Corretta e Aggiornata)\n\nimport React, { useState, useEffect } from 'react';\nimport { Form, Button, Row, Col, Spinner } from 'react-bootstrap';\nimport { useTranslation } from 'react-i18next';\nimport { mealTypeOptions } from '../../../constants/mealConstants';\nimport styles from './MealForm.module.css'; \n// import dayjs from 'dayjs'; // Rimosso: non utilizzato\n// import { Camera, CameraResultType, CameraSource } from '@capacitor/camera'; // Rimosso: non pi√π utilizzato\nimport TopicInput from '../TopicInput';\nimport OpenStreetMapComponent from '../../maps/OpenStreetMapComponent';\n// import PlacesAutocompleteInput from '../../Map/PlacesAutocompleteInput'; // Rimosso: manteniamo solo OpenStreetMap\nimport { sanitizeMealData, containsDangerousContent } from '../../../services/sanitizationService';\n\n        // Opzioni per la durata del TableTalk¬Æ\nconst languageOptions = ['Italiano', 'English', 'Espa√±ol', 'Fran√ßais', 'Deutsch', '‰∏≠Êñá', 'ÿßŸÑÿπÿ±ÿ®Ÿäÿ©'];\n\nconst MealForm = ({ initialData, onSubmit, onCancel, isLoading, isSubmitting, submitButtonText }) => {\n  const { t } = useTranslation();\n  \n  // Opzioni di durata tradotte\n  const durationOptions = [\n    { value: 30, label: t('meals.form.durationOptions.30min') },\n    { value: 60, label: t('meals.form.durationOptions.1hour') },\n    { value: 90, label: t('meals.form.durationOptions.1hour30') },\n    { value: 120, label: t('meals.form.durationOptions.2hours') },\n    { value: 150, label: t('meals.form.durationOptions.2hours30') },\n    { value: 180, label: t('meals.form.durationOptions.3hours') },\n  ];\n\n  // Definiamo uno stato di default pulito\n  const getInitialState = () => {\n    // üîí VALIDAZIONE DATA: Suggerisci una data valida di default\n    const now = new Date();\n    const suggestedDate = new Date(now.getTime() + 60 * 60 * 1000); // 1 ora da ora\n    \n    // Formatta per input datetime-local\n    const year = suggestedDate.getFullYear();\n    const month = String(suggestedDate.getMonth() + 1).padStart(2, '0');\n    const day = String(suggestedDate.getDate()).padStart(2, '0');\n    const hours = String(suggestedDate.getHours()).padStart(2, '0');\n    const minutes = String(suggestedDate.getMinutes()).padStart(2, '0');\n    \n    return {\n      title: '',\n      description: '',\n      mealType: 'virtual', // Aggiungi questo! Iniziamo con 'virtual' come default\n      type: 'lunch',\n      date: `${year}-${month}-${day}T${hours}:${minutes}`, // üîí Data valida di default\n      duration: 60,\n      maxParticipants: 2,\n      language: 'English',\n      topics: [],\n      location: null, // Assicurati che location sia null all'inizio\n      isPublic: true, // Di default i TableTalk¬Æ sono pubblici\n      estimatedCost: '', // Nuovo campo\n    };\n  };\n\n  const [formData, setFormData] = useState(getInitialState());\n  const [imageFile, setImageFile] = useState(null);\n  const [imagePreview, setImagePreview] = useState(null);\n  const [imageBase64, setImageBase64] = useState('');\n  const [errors, setErrors] = useState({});\n  \n  // ‚úÖ AGGIUNGI: State per location\n  const [selectedLocation, setSelectedLocation] = useState(null);\n\n  // ‚úÖ AGGIUNGI: Sincronizza selectedLocation con formData.location\n  useEffect(() => {\n    if (formData.location && formData.location.coordinates) {\n      setSelectedLocation({\n        lat: formData.location.coordinates[1],\n        lng: formData.location.coordinates[0],\n        address: formData.location.address\n      });\n    }\n  }, [formData.location]);\n\n  // üîí VALIDAZIONE DATA: Calcola la data minima valida per l'input\n  const getMinValidDateTime = () => {\n    const now = new Date();\n    // Tolleranza di 5 minuti per sincronizzazione dispositivi\n    const toleranceMs = 5 * 60 * 1000;\n    const minValidDate = new Date(now.getTime() - toleranceMs);\n    \n    // Formatta per input datetime-local (YYYY-MM-DDTHH:mm)\n    const year = minValidDate.getFullYear();\n    const month = String(minValidDate.getMonth() + 1).padStart(2, '0');\n    const day = String(minValidDate.getDate()).padStart(2, '0');\n    const hours = String(minValidDate.getHours()).padStart(2, '0');\n    const minutes = String(minValidDate.getMinutes()).padStart(2, '0');\n    \n    return `${year}-${month}-${day}T${hours}:${minutes}`;\n  };\n\n  // Funzione di validazione\n  const validateField = (name, value) => {\n    switch (name) {\n      case 'title':\n        if (!value.trim()) return t('meals.form.titleRequired');\n        if (value.trim().length < 5) return t('meals.form.titleMinLength');\n        if (value.trim().length > 50) return t('meals.form.titleMaxLength');\n        \n        // üõ°Ô∏è PROTEZIONE XSS: Controlla contenuto pericoloso\n        if (containsDangerousContent(value)) {\n          return 'Il titolo contiene contenuto non permesso (HTML/JavaScript)';\n        }\n        break;\n      case 'description':\n        if (!value.trim()) return t('meals.form.descriptionRequired');\n        if (value.trim().length < 10) return t('meals.form.descriptionMinLength');\n        if (value.trim().length > 1000) return t('meals.form.descriptionMaxLength');\n        \n        // üõ°Ô∏è PROTEZIONE XSS: Controlla contenuto pericoloso\n        if (containsDangerousContent(value)) {\n          return 'La descrizione contiene contenuto non permesso (HTML/JavaScript)';\n        }\n        break;\n      case 'date':\n        if (!value) return t('meals.form.dateRequired');\n        \n        // üîí VALIDAZIONE DATA: Impedisce selezione date passate\n        const selectedDate = new Date(value);\n        const now = new Date();\n        \n        // Tolleranza di 5 minuti per sincronizzazione dispositivi\n        const toleranceMs = 5 * 60 * 1000; // 5 minuti\n        const minValidDate = new Date(now.getTime() - toleranceMs);\n        \n        if (selectedDate < minValidDate) {\n          return t('meals.form.datePast') || 'La data deve essere nel futuro';\n        }\n        \n        // Validazione aggiuntiva: non permettere date troppo lontane nel futuro (es. > 1 anno)\n        const maxFutureDate = new Date(now.getFullYear() + 1, now.getMonth(), now.getDate());\n        if (selectedDate > maxFutureDate) {\n          return t('meals.form.dateTooFar') || 'La data non pu√≤ essere pi√π di un anno nel futuro';\n        }\n        \n        break;\n      case 'maxParticipants':\n        if (!value || value < 2) return t('meals.form.maxParticipantsMin');\n        if (value > 10) return t('meals.form.maxParticipantsMax');\n        break;\n      case 'topics':\n        // Opzionale: niente errore se vuoto\n        return '';\n      case 'location':\n        if (formData.mealType === 'physical' && !value) return t('meals.form.locationRequired');\n        break;\n      default:\n        return '';\n    }\n    return '';\n  };\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    \n    // üîí VALIDAZIONE DATA SPECIALE: Controllo immediato per date non valide\n    if (name === 'date' && value) {\n      const selectedDate = new Date(value);\n      const now = new Date();\n      const toleranceMs = 5 * 60 * 1000; // 5 minuti\n      const minValidDate = new Date(now.getTime() - toleranceMs);\n      \n      // Se la data selezionata √® nel passato, resetta il campo\n      if (selectedDate < minValidDate) {\n        console.warn('‚ö†Ô∏è [MealForm] Data nel passato selezionata, reset campo');\n        setFormData(prev => ({ ...prev, date: '' }));\n        setErrors(prev => ({\n          ...prev,\n          date: t('meals.form.datePast') || 'La data deve essere nel futuro'\n        }));\n        return;\n      }\n    }\n    \n    setFormData(prev => ({ ...prev, [name]: value }));\n    \n    // Validazione in tempo reale\n    const error = validateField(name, value);\n    setErrors(prev => ({\n      ...prev,\n      [name]: error\n    }));\n  };\n\n  const handleBlur = (e) => {\n    const { name, value } = e.target;\n    const error = validateField(name, value);\n    setErrors(prev => ({\n      ...prev,\n      [name]: error\n    }));\n  };\n\n  const handleTopicsChange = (newTopics) => {\n    setFormData(prev => ({ ...prev, topics: newTopics }));\n    \n    // Validazione per i topics\n    const error = validateField('topics', newTopics);\n    setErrors(prev => ({\n      ...prev,\n      topics: error\n    }));\n  };\n\n  // ‚úÖ AGGIUNGI: Handler per selezione location\n  const handleLocationSelect = (location) => {\n    setSelectedLocation(location);\n    setFormData(prev => ({\n      ...prev,\n      location: {\n        address: location.address || `${location.lat.toFixed(4)}, ${location.lng.toFixed(4)}`,\n        coordinates: [location.lng, location.lat] // MongoDB usa [lng, lat]\n      }\n    }));\n    \n    // Rimuovi errori di location se presenti\n    setErrors(prev => ({\n      ...prev,\n      location: null\n    }));\n  };\n\n  // Funzione handlePhotoSelect rimossa - ora usiamo solo l'input file standard\n\n  // üìÅ Gestione upload file dal computer (per browser)\n  const handleFileSelect = async (event) => {\n    const file = event.target.files[0];\n    if (!file) return;\n\n    // Verifica che sia un'immagine\n    if (!file.type.startsWith('image/')) {\n      alert('Seleziona solo file immagine');\n      return;\n    }\n\n    // Verifica dimensione (max 10MB)\n    if (file.size > 10 * 1024 * 1024) {\n      alert('Il file √® troppo grande. Massimo 10MB.');\n      return;\n    }\n\n    try {\n      // Crea preview\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        setImagePreview(e.target.result);\n      };\n      reader.readAsDataURL(file);\n\n      // Comprimi se necessario\n      let processedFile = file;\n      if (file.size > 4 * 1024 * 1024) {\n        const blob = await compressImageBlob(file, { maxWidth: 1600, quality: 0.7 });\n        processedFile = new File([blob], file.name, { type: 'image/jpeg' });\n      }\n\n      setImageFile(processedFile);\n      \n      // Genera base64 come fallback\n      try {\n        const base64 = await blobToBase64(processedFile);\n        if (typeof base64 === 'string') setImageBase64(base64);\n      } catch (_) {}\n\n      console.log('üìÅ File selezionato:', processedFile.name, processedFile.size);\n    } catch (error) {\n      console.error(\"Errore elaborazione file\", error);\n    }\n  };\n\n  // Comprimi immagine usando canvas\n  const compressImageBlob = async (blob, { maxWidth = 1600, quality = 0.7 } = {}) => {\n    try {\n      const imageBitmap = await createImageBitmap(blob);\n      const scale = Math.min(1, maxWidth / imageBitmap.width);\n      const targetWidth = Math.round(imageBitmap.width * scale);\n      const targetHeight = Math.round(imageBitmap.height * scale);\n      const canvas = document.createElement('canvas');\n      canvas.width = targetWidth;\n      canvas.height = targetHeight;\n      const ctx = canvas.getContext('2d');\n      ctx.drawImage(imageBitmap, 0, 0, targetWidth, targetHeight);\n      const dataUrl = canvas.toDataURL('image/jpeg', quality);\n      const res = await fetch(dataUrl);\n      return await res.blob();\n    } catch (e) {\n      // in caso di fallimento, restituisci l'originale\n      return blob;\n    }\n  };\n\n  const blobToBase64 = (blob) => new Promise((resolve, reject) => {\n    try {\n      const reader = new FileReader();\n      reader.onloadend = () => resolve(reader.result);\n      reader.onerror = reject;\n      reader.readAsDataURL(blob);\n    } catch (e) { reject(e); }\n  });\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    \n    // üîí VALIDAZIONE DATA FINALE: Controllo aggiuntivo prima del submit\n    if (formData.date) {\n      const selectedDate = new Date(formData.date);\n      const now = new Date();\n      const toleranceMs = 5 * 60 * 1000; // 5 minuti\n      const minValidDate = new Date(now.getTime() - toleranceMs);\n      \n      if (selectedDate < minValidDate) {\n        console.warn('‚ö†Ô∏è [MealForm] Submit bloccato: data nel passato rilevata');\n        setErrors(prev => ({\n          ...prev,\n          date: t('meals.form.datePast') || 'La data deve essere nel futuro'\n        }));\n        return; // Blocca il submit\n      }\n    }\n    \n    // Validazione completa prima del submit\n    const newErrors = {};\n    Object.keys(formData).forEach(key => {\n      const error = validateField(key, formData[key]);\n      if (error) newErrors[key] = error;\n    });\n    \n    if (Object.keys(newErrors).length > 0) {\n      setErrors(newErrors);\n      return; // Non procedere se ci sono errori\n    }\n\n    // üõ°Ô∏è PROTEZIONE XSS: Sanitizza tutti i dati prima dell'invio\n    const sanitizedData = sanitizeMealData(formData);\n    \n    // Log per debugging (solo in development)\n    if (process.env.NODE_ENV === 'development') {\n      const hasChanges = JSON.stringify(sanitizedData) !== JSON.stringify(formData);\n      if (hasChanges) {\n        console.log('üõ°Ô∏è [MealForm] Dati sanitizzati prima dell\\'invio:', {\n          original: formData,\n          sanitized: sanitizedData\n        });\n      }\n    }\n\n    const formDataToSend = new FormData();\n    const dataToProcess = { ...sanitizedData };\n\n    if (dataToProcess.date) {\n      dataToProcess.date = new Date(dataToProcess.date).toISOString();\n    }\n\n    for (const key in dataToProcess) {\n      if (key === 'topics' && Array.isArray(dataToProcess[key])) {\n        dataToProcess[key].forEach(topic => formDataToSend.append('topics', topic));\n      } else if (key === 'location' && dataToProcess[key]) {\n        // Per i TableTalk¬Æ fisici, aggiungi la location\n        formDataToSend.append('location', JSON.stringify(dataToProcess[key]));\n      } else if (key !== 'location' || formData.mealType === 'physical') {\n        // Aggiungi tutti i campi tranne location se √® virtuale\n        formDataToSend.append(key, dataToProcess[key]);\n      }\n    }\n    \n    if (imageFile) {\n      formDataToSend.append('image', imageFile);\n      if (imageBase64) {\n        formDataToSend.append('imageBase64', imageBase64);\n      }\n      if (imagePreview) {\n        formDataToSend.append('imageLocalUri', imagePreview);\n      }\n    }\n    \n    onSubmit(formDataToSend);\n  };\n\n  return (\n    <Form onSubmit={handleSubmit} className={styles.form}>\n              {/* Sezione Tipo di TableTalk¬Æ con pulsanti personalizzati */}\n      <div className={styles.formGroup}>\n        <label className={styles.formLabel}>{t('meals.form.typeLabel')}</label>\n        <div className={styles.typeSelector}>\n          <button\n            type=\"button\" // Importante per non inviare il form\n            className={`${styles.typeButton} ${formData.mealType === 'virtual' ? styles.active : ''}`}\n            onClick={() => setFormData({ ...formData, mealType: 'virtual', location: null })} // Resetta la location se si sceglie virtuale\n          >\n            <span className={styles.typeIcon}>üé•</span>\n            <span className={styles.typeText}>{t('meals.form.virtualType')}</span>\n            <small className={styles.typeDescription}>{t('meals.form.virtualDescription')}</small>\n          </button>\n          <button\n            type=\"button\"\n            className={`${styles.typeButton} ${formData.mealType === 'physical' ? styles.active : ''}`}\n            onClick={() => setFormData({ ...formData, mealType: 'physical' })}\n          >\n            <span className={styles.typeIcon}>üìç</span>\n            <span className={styles.typeText}>{t('meals.form.physicalType')}</span>\n            <small className={styles.typeDescription}>{t('meals.form.physicalDescription')}</small>\n          </button>\n        </div>\n        <div className={styles.typeInfo}>\n          {formData.mealType === 'virtual' \n            ? t('meals.form.virtualInfo')\n            : t('meals.form.physicalInfo')\n          }\n        </div>\n      </div>\n\n              {/* Sezione Visibilit√† - solo per TableTalk¬Æ fisici */}\n      {formData.mealType === 'physical' && (\n        <div className={styles.formGroup}>\n          <label className={styles.formLabel}>{t('meals.form.visibilityLabel')}</label>\n          <div className={styles.visibilitySelector}>\n            <button\n              type=\"button\"\n              className={`${styles.visibilityButton} ${formData.isPublic ? styles.active : ''}`}\n              onClick={() => setFormData({ ...formData, isPublic: true })}\n            >\n              <span className={styles.visibilityIcon}>üåç</span>\n              <span className={styles.visibilityText}>{t('meals.form.publicVisibility')}</span>\n              <small className={styles.visibilityDescription}>{t('meals.form.publicDescription')}</small>\n            </button>\n            <button\n              type=\"button\"\n              className={`${styles.visibilityButton} ${!formData.isPublic ? styles.active : ''}`}\n              onClick={() => setFormData({ ...formData, isPublic: false })}\n            >\n              <span className={styles.visibilityIcon}>üîí</span>\n              <span className={styles.visibilityText}>{t('meals.form.privateVisibility')}</span>\n              <small className={styles.visibilityDescription}>{t('meals.form.privateDescription')}</small>\n            </button>\n          </div>\n          <div className={styles.visibilityInfo}>\n            {formData.isPublic \n                          ? t('meals.form.publicInfo')\n            : t('meals.form.privateInfo')\n            }\n          </div>\n        </div>\n      )}\n\n      <Form.Group className=\"mb-3\">\n        <Form.Label className={styles.formLabel}>{t('meals.form.titleLabel')}</Form.Label>\n        <Form.Control \n          className={`${styles.formControl} ${errors.title ? 'is-invalid' : ''}`}\n          type=\"text\" \n          name=\"title\" \n          value={formData.title} \n          onChange={handleChange}\n          onBlur={handleBlur}\n          required \n        />\n        {errors.title && <div className=\"invalid-feedback\">{errors.title}</div>}\n      </Form.Group>\n      \n      <Form.Group className=\"mb-3\">\n        <Form.Label className={styles.formLabel}>{t('meals.form.descriptionLabel')}</Form.Label>\n        <Form.Control \n          className={`${styles.formControl} ${errors.description ? 'is-invalid' : ''}`}\n          as=\"textarea\" \n          rows={3} \n          name=\"description\" \n          value={formData.description} \n          onChange={handleChange}\n          onBlur={handleBlur}\n          required \n        />\n        {errors.description && <div className=\"invalid-feedback\">{errors.description}</div>}\n      </Form.Group>\n\n      <Row className=\"mb-3\">\n        <Col md={6}>\n            <Form.Group>\n                <Form.Label className={styles.formLabel}>{t('meals.form.categoryLabel')}</Form.Label>\n                <Form.Select className={styles.formSelect} name=\"type\" value={formData.type} onChange={handleChange} required>\n                    <option value=\"\" disabled>{t('meals.form.selectCategory')}</option>\n                    {mealTypeOptions.map(opt => <option key={opt.value} value={opt.value}>{opt.label}</option>)}\n                </Form.Select>\n            </Form.Group>\n        </Col>\n        <Col md={6}>\n            <Form.Group>\n                <Form.Label className={styles.formLabel}>{t('meals.form.maxParticipantsLabel')}</Form.Label>\n                <Form.Control \n                  className={`${styles.formControl} ${errors.maxParticipants ? 'is-invalid' : ''}`}\n                  type=\"number\" \n                  name=\"maxParticipants\" \n                  value={formData.maxParticipants} \n                  onChange={handleChange}\n                  onBlur={handleBlur}\n                  required \n                  min=\"2\" \n                  max=\"10\" \n                />\n                {errors.maxParticipants && <div className=\"invalid-feedback\">{errors.maxParticipants}</div>}\n            </Form.Group>\n        </Col>\n      </Row>\n\n      <Row className=\"mb-3\">\n        <Col xs={12} md={6}>\n            <Form.Group>\n                <Form.Label className={styles.formLabel}>{t('meals.form.languageLabel')}</Form.Label>\n                <Form.Select className={styles.formSelect} name=\"language\" value={formData.language} onChange={handleChange} required>\n                    {languageOptions.map(lang => <option key={lang} value={lang}>{lang}</option>)}\n                </Form.Select>\n            </Form.Group>\n        </Col>\n        <Col xs={12} md={6}>\n            <Form.Group>\n                <Form.Label className={styles.formLabel}>{t('meals.form.durationLabel')}</Form.Label>\n                <Form.Select className={styles.formSelect} name=\"duration\" value={formData.duration} onChange={handleChange} required>\n                    {durationOptions.map(opt => <option key={opt.value} value={opt.value}>{opt.label}</option>)}\n                </Form.Select>\n            </Form.Group>\n        </Col>\n      </Row>\n\n      {/* Prezzo Stimato - Solo per pasti fisici */}\n      {formData.mealType === 'physical' && (\n        <Row className=\"mb-3\">\n          <Col md={6}>\n            <Form.Group>\n              <Form.Label className={styles.formLabel}>{t('meals.form.priceLabel') || 'Prezzo Stimato (‚Ç¨)'}</Form.Label>\n              <div className=\"input-group\">\n                <span className=\"input-group-text\">‚Ç¨</span>\n                <Form.Control\n                  className={styles.formControl}\n                  type=\"number\"\n                  name=\"estimatedCost\"\n                  value={formData.estimatedCost}\n                  onChange={handleChange}\n                  placeholder=\"Es. 25\"\n                  min=\"0\"\n                />\n              </div>\n              <Form.Text className=\"text-muted\">\n                Costo medio a persona (solo indicativo)\n              </Form.Text>\n            </Form.Group>\n          </Col>\n        </Row>\n      )}\n\n      <Row className=\"mb-3\">\n        <Col xs={12} md={6}>\n            <Form.Group>\n                <Form.Label className={styles.formLabel}>{t('meals.form.dateLabel')}</Form.Label>\n                <div className={styles.dateInputContainer}>\n                  <Form.Control \n                    className={`${styles.formControl} ${errors.date ? 'is-invalid' : ''}`}\n                    type=\"datetime-local\" \n                    name=\"date\" \n                    value={formData.date} \n                    min={getMinValidDateTime()} // üîí Impedisce selezione date passate\n                    onChange={handleChange}\n                    onBlur={handleBlur}\n                    required \n                  />\n                  <button\n                    type=\"button\"\n                    className={styles.dateHelperButton}\n                    onClick={() => {\n                      // üîí SUGGERIMENTO DATA: Imposta una data valida di default\n                      const now = new Date();\n                      const suggestedDate = new Date(now.getTime() + 60 * 60 * 1000); // 1 ora da ora\n                      \n                      const year = suggestedDate.getFullYear();\n                      const month = String(suggestedDate.getMonth() + 1).padStart(2, '0');\n                      const day = String(suggestedDate.getDate()).padStart(2, '0');\n                      const hours = String(suggestedDate.getHours()).padStart(2, '0');\n                      const minutes = String(suggestedDate.getMinutes()).padStart(2, '0');\n                      \n                      const formattedDate = `${year}-${month}-${day}T${hours}:${minutes}`;\n                      setFormData(prev => ({ ...prev, date: formattedDate }));\n                      \n                      // Pulisci eventuali errori\n                      setErrors(prev => ({ ...prev, date: '' }));\n                    }}\n                    title=\"Suggerisci data valida (1 ora da ora)\"\n                  >\n                    üïê\n                  </button>\n                </div>\n                {errors.date && <div className=\"invalid-feedback\">{errors.date}</div>}\n                <Form.Text className=\"text-muted\">\n                  üìÖ Seleziona una data e ora nel futuro\n                </Form.Text>\n            </Form.Group>\n        </Col>\n        <Col xs={12} md={6}>\n            {/* Campo per la posizione - visibile solo per TableTalk¬Æ fisici */}\n            {formData.mealType === 'physical' && (\n              <Form.Group>\n                <Form.Label className={styles.formLabel}>{t('meals.form.addressLabel')}</Form.Label>\n                <Form.Control \n                  className={`${styles.formControl} ${errors.location ? 'is-invalid' : ''}`}\n                  type=\"text\" \n                  name=\"location\" \n                  value={formData.location?.address || ''} \n                  onChange={handleChange}\n                  onBlur={handleBlur}\n                  placeholder={t('meals.form.addressPlaceholder')}\n                  readOnly\n                />\n                {errors.location && <div className=\"invalid-feedback\">{errors.location}</div>}\n                <Form.Text className=\"text-muted\">\n                  üìç L'indirizzo viene selezionato dalla mappa sottostante\n                </Form.Text>\n              </Form.Group>\n            )}\n        </Col>\n      </Row>\n\n              {/* ‚úÖ SEZIONE MAPPA CON OPENSTREETMAP */}\n      {formData.mealType === 'physical' && (\n        <div className={styles.formGroup}>\n          <label>üìç Seleziona posizione del pasto:</label>\n          <OpenStreetMapComponent\n            selectedLocation={selectedLocation}\n            onLocationSelect={handleLocationSelect}\n            height=\"300px\"\n            center={\n              selectedLocation \n                ? [selectedLocation.lat, selectedLocation.lng]\n                : formData.location && formData.location.coordinates\n                  ? [formData.location.coordinates[1], formData.location.coordinates[0]]\n                  : [45.4642, 9.1900] // Milano di default\n            }\n          />\n          {/* Eventuale visualizzazione indirizzo selezionato */}\n          {selectedLocation && (\n            <div className=\"selected-location-info\" style={{ \n              marginTop: '10px', \n              padding: '10px', \n              backgroundColor: '#f8f9fa', \n              borderRadius: '8px',\n              border: '1px solid #dee2e6'\n            }}>\n              ‚úÖ <strong>Posizione selezionata:</strong><br />\n              <span style={{ fontSize: '14px', color: '#666' }}>\n                {selectedLocation.address || \n                 `Lat: ${selectedLocation.lat.toFixed(4)}, Lng: ${selectedLocation.lng.toFixed(4)}`}\n              </span>\n            </div>\n              )}\n        </div>\n      )}\n      \n      <Form.Group className=\"mb-3\">\n          <Form.Label className={styles.formLabel}>{t('meals.form.topicsLabel')}</Form.Label>\n          <TopicInput topics={formData.topics} setTopics={handleTopicsChange} />\n          {errors.topics && <div className=\"invalid-feedback d-block\">{errors.topics}</div>}\n          <Form.Text>{t('meals.form.topicsHelp')}</Form.Text>\n      </Form.Group>\n      \n      <Form.Group className=\"mb-3\">\n        <Form.Label>{t('meals.form.coverImageLabel')}</Form.Label>\n        {imagePreview && <img src={imagePreview} alt={t('meals.form.coverImageAlt')} className={styles.imagePreview} />}\n        \n        {/* üìÅ Input file unificato per tutti i dispositivi */}\n        <Form.Control\n          type=\"file\"\n          accept=\"image/*\"\n          onChange={handleFileSelect}\n          className=\"mt-2\"\n          style={{ fontSize: '0.9em' }}\n        />\n        <Form.Text className=\"text-muted\">\n          Seleziona un'immagine dal tuo dispositivo (max 10MB)\n        </Form.Text>\n        \n        {/* üîÑ Indicatore stato immagine */}\n        {imageFile && (\n          <div className=\"mt-2 p-2 bg-light rounded\" style={{ fontSize: '0.9em' }}>\n            <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\n              <span>üì∑ Immagine selezionata</span>\n              <small className=\"text-muted\">\n                {imageFile.name} ({(imageFile.size / 1024 / 1024).toFixed(2)} MB)\n              </small>\n            </div>\n            <small className=\"text-muted d-block mt-1\">\n              L'immagine verr√† caricata insieme al pasto\n            </small>\n          </div>\n        )}\n      </Form.Group>\n      \n      <div className={styles.stickyActions}>\n        <Button \n          variant=\"primary\" \n          type=\"submit\" \n          className={styles.submitButton} \n          disabled={isLoading || isSubmitting}\n        >\n          {isLoading || isSubmitting ? (\n            <>\n              <Spinner as=\"span\" animation=\"border\" size=\"sm\" />\n              <span> {isSubmitting ? t('meals.form.saving') : t('meals.form.loading')}</span>\n            </>\n          ) : (\n            submitButtonText || t('forms.save')\n          )}\n        </Button>\n      </div>\n    </Form>\n  );\n};\n\nexport default MealForm;","import DOMPurify from 'dompurify';\n\n/**\n * üõ°Ô∏è SERVIZIO SANITIZZAZIONE FRONTEND\n * Protegge da attacchi XSS sanitizzando tutti gli input utente\n */\n\n// Configurazione DOMPurify per massima sicurezza\nconst PURIFY_CONFIG = {\n  ALLOWED_TAGS: [], // Nessun tag HTML permesso\n  ALLOWED_ATTR: [], // Nessun attributo permesso\n  ALLOW_DATA_ATTR: false, // Non permettere data attributes\n  ALLOW_UNKNOWN_PROTOCOLS: false, // Non permettere protocolli sconosciuti\n  RETURN_DOM: false, // Ritorna stringa, non DOM\n  RETURN_DOM_FRAGMENT: false, // Non ritornare frammenti DOM\n  RETURN_TRUSTED_TYPE: false, // Non ritornare trusted types\n  KEEP_CONTENT: false, // Non mantenere contenuto non permesso\n  IN_PLACE: false, // Non modificare l'originale\n  SANITIZE_DOM: true, // Sanitizza il DOM se necessario\n  WHOLE_DOCUMENT: false, // Non sanitizzare tutto il documento\n  RETURN_DOM_IMPORT: false, // Non importare DOM\n  FORCE_BODY: false, // Non forzare body tag\n  SANITIZE_NAMED_PROPS: false, // Non sanitizzare named properties\n  ALLOWED_URI_REGEXP: /^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i, // Solo protocolli sicuri\n};\n\n/**\n * üßπ Sanitizza una stringa rimuovendo HTML e JavaScript pericoloso\n * @param {string} input - Stringa da sanitizzare\n * @param {boolean} allowBasicFormatting - Permette formattazione base (false per massima sicurezza)\n * @returns {string} - Stringa sanitizzata\n */\nexport const sanitizeString = (input, allowBasicFormatting = false) => {\n  if (!input || typeof input !== 'string') {\n    return '';\n  }\n\n  try {\n    // Configurazione personalizzata per formattazione base se richiesto\n    const config = allowBasicFormatting \n      ? {\n          ...PURIFY_CONFIG,\n          ALLOWED_TAGS: ['b', 'i', 'em', 'strong', 'u'], // Solo formattazione base\n          ALLOWED_ATTR: [], // Nessun attributo\n        }\n      : PURIFY_CONFIG;\n\n    // Sanitizza la stringa\n    const sanitized = DOMPurify.sanitize(input, config);\n    \n    // Log per debugging (solo in development)\n    if (process.env.NODE_ENV === 'development' && sanitized !== input) {\n      console.log('üõ°Ô∏è [SanitizationService] Stringa sanitizzata:', {\n        original: input,\n        sanitized: sanitized,\n        removed: input.length - sanitized.length\n      });\n    }\n\n    return sanitized;\n  } catch (error) {\n    console.error('‚ùå [SanitizationService] Errore sanitizzazione:', error);\n    // In caso di errore, ritorna stringa vuota per sicurezza\n    return '';\n  }\n};\n\n/**\n * üîí Sanitizza un oggetto rimuovendo HTML da tutti i campi di testo\n * @param {Object} obj - Oggetto da sanitizzare\n * @param {Array} textFields - Array di nomi campi da sanitizzare\n * @param {boolean} allowBasicFormatting - Permette formattazione base\n * @returns {Object} - Oggetto sanitizzato\n */\nexport const sanitizeObject = (obj, textFields = [], allowBasicFormatting = false) => {\n  if (!obj || typeof obj !== 'object') {\n    return obj;\n  }\n\n  const sanitized = { ...obj };\n\n  // Se non sono specificati campi, sanitizza tutti i campi stringa\n  const fieldsToSanitize = textFields.length > 0 \n    ? textFields \n    : Object.keys(obj).filter(key => typeof obj[key] === 'string');\n\n  fieldsToSanitize.forEach(field => {\n    if (sanitized[field] && typeof sanitized[field] === 'string') {\n      sanitized[field] = sanitizeString(sanitized[field], allowBasicFormatting);\n    }\n  });\n\n  return sanitized;\n};\n\n/**\n * üßπ Sanitizza un array di stringhe\n * @param {Array} array - Array di stringhe da sanitizzare\n * @param {boolean} allowBasicFormatting - Permette formattazione base\n * @returns {Array} - Array sanitizzato\n */\nexport const sanitizeArray = (array, allowBasicFormatting = false) => {\n  if (!Array.isArray(array)) {\n    return [];\n  }\n\n  return array.map(item => {\n    if (typeof item === 'string') {\n      return sanitizeString(item, allowBasicFormatting);\n    }\n    return item;\n  });\n};\n\n/**\n * üîç Valida se una stringa contiene HTML o JavaScript pericoloso\n * @param {string} input - Stringa da validare\n * @returns {boolean} - true se contiene contenuto pericoloso\n */\nexport const containsDangerousContent = (input) => {\n  if (!input || typeof input !== 'string') {\n    return false;\n  }\n\n  // Pattern per rilevare HTML e JavaScript pericoloso\n  const dangerousPatterns = [\n    /<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi, // Script tags\n    /<iframe\\b[^<]*(?:(?!<\\/iframe>)<[^<]*)*<\\/iframe>/gi, // Iframe tags\n    /<object\\b[^<]*(?:(?!<\\/object>)<[^<]*)*<\\/object>/gi, // Object tags\n    /<embed\\b[^<]*(?:(?!<\\/embed>)<[^<]*)*<\\/embed>/gi, // Embed tags\n    /javascript:/gi, // JavaScript protocol\n    /vbscript:/gi, // VBScript protocol\n    /data:/gi, // Data protocol\n    /on\\w+\\s*=/gi, // Event handlers\n    /<.*>/g, // Qualsiasi tag HTML\n  ];\n\n  return dangerousPatterns.some(pattern => pattern.test(input));\n};\n\n/**\n * üõ°Ô∏è Sanitizza input per form di creazione pasti\n * @param {Object} mealData - Dati del pasto da sanitizzare\n * @returns {Object} - Dati sanitizzati\n * \n * Nota: I campi numerici (es. estimatedCost, duration, maxParticipants) non vengono sanitizzati\n * perch√© non sono stringhe, ma vengono mantenuti nell'oggetto risultante.\n */\nexport const sanitizeMealData = (mealData) => {\n  const textFields = ['title', 'description', 'language', 'topics'];\n  \n  return sanitizeObject(mealData, textFields, false);\n};\n\n/**\n * üõ°Ô∏è Sanitizza input per profilo utente\n * @param {Object} profileData - Dati del profilo da sanitizzare\n * @returns {Object} - Dati sanitizzati\n */\nexport const sanitizeProfileData = (profileData) => {\n  const textFields = ['nickname', 'bio', 'interests', 'languages', 'preferredCuisine'];\n  \n  return sanitizeObject(profileData, textFields, false);\n};\n\n/**\n * üõ°Ô∏è Sanitizza input per messaggi chat\n * @param {Object} messageData - Dati del messaggio da sanitizzare\n * @returns {Object} - Dati sanitizzati\n */\nexport const sanitizeMessageData = (messageData) => {\n  const textFields = ['content'];\n  \n  return sanitizeObject(messageData, textFields, false);\n};\n\n// Esporta tutte le funzioni\nexport default {\n  sanitizeString,\n  sanitizeObject,\n  sanitizeArray,\n  containsDangerousContent,\n  sanitizeMealData,\n  sanitizeProfileData,\n  sanitizeMessageData,\n};\n"],"names":["FlyToMarker","_ref","position","zoom","map","useMap","useEffect","lat","lng","targetZoom","getZoom","flyTo","duration","CenterUpdater","_ref2","center","Array","isArray","length","LocationPicker","_ref3","onLocationSelect","onMapClick","useMapEvents","click","e","latlng","L","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","_ref4","meals","markers","onMarkerClick","selectedLocation","userLocation","height","width","window","console","log","error","_jsx","style","children","_jsxs","MapContainer","borderRadius","whenReady","whenCreated","mapInstance","TileLayer","url","attribution","errorTileUrl","Marker","icon","iconSize","iconAnchor","popupAnchor","shadowSize","Popup","address","concat","toFixed","marker","eventHandlers","id","minWidth","margin","color","title","name","price","type","meal","restaurant","participants","date","onClick","open","background","border","padding","cursor","marginTop","_excluded","Row","React","ref","bsPrefix","className","as","Component","props","_objectWithoutProperties","decoratedBsPrefix","useBootstrapPrefix","breakpoints","useBootstrapBreakpoints","minBreakpoint","useBootstrapMinBreakpoint","sizePrefix","classes","forEach","brkPoint","propValue","cols","infix","push","_objectSpread","classNames","displayName","navigate","useNavigate","handleBack","styles","FaArrowLeft","marginRight","topics","setTopics","onValidationChange","inputValue","setInputValue","useState","setError","cleanTopics","hasValidTopics","every","topic","trimmedTopic","trim","test","cleanedTopics","filter","index","removeTopic","topicToRemove","value","onChange","target","onKeyDown","key","preventDefault","validation","isValid","some","existingTopic","toLowerCase","validateTopic","limitError","warn","placeholder","disabled","languageOptions","_formData$location","initialData","onSubmit","onCancel","isLoading","isSubmitting","submitButtonText","t","useTranslation","durationOptions","label","formData","setFormData","getInitialState","now","Date","suggestedDate","getTime","year","getFullYear","month","String","getMonth","padStart","day","getDate","hours","getHours","minutes","getMinutes","description","mealType","maxParticipants","language","location","isPublic","estimatedCost","imageFile","setImageFile","imagePreview","setImagePreview","imageBase64","setImageBase64","errors","setErrors","setSelectedLocation","coordinates","validateField","containsDangerousContent","selectedDate","toleranceMs","handleChange","prev","handleBlur","compressImageBlob","async","blob","maxWidth","quality","arguments","undefined","imageBitmap","createImageBitmap","scale","Math","min","targetWidth","round","targetHeight","canvas","document","createElement","getContext","drawImage","dataUrl","toDataURL","res","fetch","blobToBase64","Promise","resolve","reject","reader","FileReader","onloadend","result","onerror","readAsDataURL","Form","newErrors","Object","keys","sanitizedData","sanitizeMealData","formDataToSend","FormData","dataToProcess","toISOString","append","JSON","stringify","form","formGroup","formLabel","typeSelector","typeButton","active","typeIcon","typeText","typeDescription","typeInfo","visibilitySelector","visibilityButton","visibilityIcon","visibilityText","visibilityDescription","visibilityInfo","Group","Label","Control","formControl","onBlur","required","rows","Col","md","Select","formSelect","mealTypeOptions","opt","max","xs","lang","Text","dateInputContainer","getMinValidDateTime","minValidDate","dateHelperButton","formattedDate","readOnly","OpenStreetMapComponent","backgroundColor","fontSize","TopicInput","newTopics","src","alt","accept","file","event","files","startsWith","size","alert","onload","processedFile","File","base64","_","display","alignItems","justifyContent","stickyActions","Button","variant","submitButton","_Fragment","Spinner","animation","PURIFY_CONFIG","ALLOWED_TAGS","ALLOWED_ATTR","ALLOW_DATA_ATTR","ALLOW_UNKNOWN_PROTOCOLS","RETURN_DOM","RETURN_DOM_FRAGMENT","RETURN_TRUSTED_TYPE","KEEP_CONTENT","IN_PLACE","SANITIZE_DOM","WHOLE_DOCUMENT","RETURN_DOM_IMPORT","FORCE_BODY","SANITIZE_NAMED_PROPS","ALLOWED_URI_REGEXP","sanitizeString","input","allowBasicFormatting","config","DOMPurify","sanitize","sanitizeObject","obj","textFields","sanitized","field","pattern","mealData"],"ignoreList":[],"sourceRoot":""}