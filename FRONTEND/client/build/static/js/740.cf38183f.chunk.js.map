{"version":3,"file":"static/js/740.cf38183f.chunk.js","mappings":"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","sources":["components/maps/OpenStreetMapComponent.jsx","../node_modules/react-bootstrap/esm/Row.js","webpack://table-talk-client/./src/components/common/BackButton/BackButton.module.css?c17f","components/common/BackButton/index.js","webpack://table-talk-client/./src/components/meals/MealForm/MealForm.module.css?14a4","../node_modules/@capacitor/camera/src/definitions.ts","../node_modules/@capacitor/camera/src/web.ts","../node_modules/@capacitor/camera/src/index.ts","webpack://table-talk-client/./src/components/meals/TopicInput/TopicInput.module.css?e3f5","components/meals/TopicInput/index.js","components/meals/MealForm/index.js","services/sanitizationService.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup, useMapEvents, useMap } from 'react-leaflet';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\n\n// Fix per icone marker di default Leaflet\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',\n  iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\n  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',\n});\n\n// Componente per centrare la mappa su una posizione specifica\nfunction FlyToMarker({ position, zoom }) {\n  const map = useMap();\n  useEffect(() => {\n    if (position && position.lat && position.lng) {\n      const targetZoom = zoom || map.getZoom();\n      // Usa flyTo per animazione smooth invece di setView\n      map.flyTo([position.lat, position.lng], targetZoom, {\n        duration: 1.5 // Animazione di 1.5 secondi\n      });\n    }\n  }, [position?.lat, position?.lng, zoom, map]);\n  return null;\n}\n\n// Componente per reagire ai cambiamenti di center prop\nfunction CenterUpdater({ center, zoom }) {\n  const map = useMap();\n  useEffect(() => {\n    if (center && Array.isArray(center) && center.length === 2) {\n      const [lat, lng] = center;\n      const targetZoom = zoom || map.getZoom();\n      map.flyTo([lat, lng], targetZoom, {\n        duration: 1.5\n      });\n    }\n  }, [center, zoom, map]);\n  return null;\n}\n\n// Componente per gestire click sulla mappa\nfunction LocationPicker({ onLocationSelect, onMapClick }) {\n  useMapEvents({\n    click(e) {\n      const { lat, lng } = e.latlng;\n      // Se c'√® onMapClick, chiamalo (per chiudere card/anteprima)\n      if (onMapClick) {\n        onMapClick();\n      }\n      // Se c'√® onLocationSelect, chiamalo (per selezionare posizione)\n      if (onLocationSelect) {\n        onLocationSelect({ lat, lng });\n      }\n    },\n  });\n  return null;\n}\n\nconst OpenStreetMapComponent = ({ \n  meals = [], \n  markers = [], // Nuova prop per markers dalla MapPage\n  onLocationSelect, \n  onMarkerClick, // Nuova prop per gestire click sui marker\n  onMapClick, // Nuova prop per gestire click sulla mappa\n  selectedLocation,\n  userLocation = null, // Nuova prop per posizione utente\n  zoom = 13, // Nuova prop per zoom\n  height = '400px',\n  width = '100%',\n  center = [45.4642, 9.1900] // Milano di default\n}) => {\n  // Verifica che Leaflet sia caricato correttamente\n  useEffect(() => {\n    if (typeof window !== 'undefined' && !window.L) {\n      console.error('‚ùå [Map] Leaflet non √® disponibile');\n    } else {\n      console.log('‚úÖ [Map] Leaflet caricato correttamente');\n    }\n  }, []);\n\n  return (\n    <div style={{ width: '100%', height: '100%', position: 'relative' }}>\n      {/* Mappa */}\n      <MapContainer \n        center={center} \n        zoom={zoom} \n        style={{ height, width, borderRadius: '8px' }}\n        whenReady={() => {\n          console.log('‚úÖ [Map] Mappa Leaflet pronta');\n        }}\n        whenCreated={(mapInstance) => {\n          console.log('‚úÖ [Map] Istanza mappa creata');\n        }}\n      >\n        <TileLayer\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n          attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n          errorTileUrl=\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='256' height='256'%3E%3Crect fill='%23ddd' width='256' height='256'/%3E%3Ctext fill='%23999' font-family='sans-serif' font-size='18' x='50%25' y='50%25' text-anchor='middle' dominant-baseline='middle'%3EErrore caricamento mappa%3C/text%3E%3C/svg%3E\"\n        />\n        \n        {/* Aggiorna il centro quando cambia il prop center */}\n        <CenterUpdater center={center} zoom={zoom} />\n        \n        {/* Gestione click per selezionare posizione e chiudere card */}\n        <LocationPicker onLocationSelect={onLocationSelect} onMapClick={onMapClick} />\n        \n        {/* Centra la mappa sulla posizione selezionata */}\n        {selectedLocation && <FlyToMarker position={selectedLocation} zoom={zoom} />}\n        \n        {/* Marker per posizione utente */}\n        {userLocation && (\n          <Marker \n            position={[userLocation.lat, userLocation.lng]}\n            icon={L.icon({\n              iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-blue.png',\n              shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',\n              iconSize: [25, 41],\n              iconAnchor: [12, 41],\n              popupAnchor: [1, -34],\n              shadowSize: [41, 41]\n            })}\n          >\n            <Popup>\n              üìç <strong>La tua posizione</strong>\n            </Popup>\n          </Marker>\n        )}\n        \n        {/* Marker per location selezionata */}\n        {selectedLocation && (\n          <Marker position={[selectedLocation.lat, selectedLocation.lng]}>\n            <Popup>\n              üìç <strong>Posizione selezionata</strong><br />\n              {selectedLocation.address || `${selectedLocation.lat.toFixed(4)}, ${selectedLocation.lng.toFixed(4)}`}\n            </Popup>\n          </Marker>\n        )}\n        \n        {/* Marker per i pasti dalla prop markers (usata da MapPage) */}\n        {markers.map((marker) => (\n          <Marker \n            key={marker.id} \n            position={[marker.lat, marker.lng]}\n            eventHandlers={{\n              click: () => {\n                if (onMarkerClick) onMarkerClick(marker.id);\n              },\n            }}\n          >\n            <Popup>\n              <div style={{ minWidth: '200px' }}>\n                <h3 style={{ margin: '0 0 8px 0', color: '#FF6B35' }}>\n                  üçΩÔ∏è {marker.title || marker.name}\n                </h3>\n                {marker.price && (\n                  <p style={{ margin: '4px 0' }}>\n                    üí∞ ‚Ç¨{marker.price}\n                  </p>\n                )}\n                {marker.type && (\n                  <p style={{ margin: '4px 0', color: '#666' }}>\n                    üìÖ {marker.type}\n                  </p>\n                )}\n              </div>\n            </Popup>\n          </Marker>\n        ))}\n        \n        {/* Marker per i pasti esistenti (compatibilit√† con vecchia API) */}\n        {meals.map(meal => (\n          <Marker \n            key={meal.id} \n            position={[meal.lat, meal.lng]}\n            eventHandlers={{\n              click: () => {\n                if (onMarkerClick) onMarkerClick(meal.id);\n              },\n            }}\n          >\n            <Popup>\n              <div style={{ minWidth: '200px' }}>\n                <h3 style={{ margin: '0 0 8px 0', color: '#FF6B35' }}>\n                  üçΩÔ∏è {meal.name}\n                </h3>\n                <p style={{ margin: '4px 0' }}>\n                  üìç {meal.restaurant || meal.address}\n                </p>\n                <p style={{ margin: '4px 0' }}>\n                  üë• {meal.participants || 0} partecipanti\n                </p>\n                <p style={{ margin: '4px 0' }}>\n                  üìÖ {meal.date}\n                </p>\n                <button\n                  onClick={() => window.open(`/meal/${meal.id}`, '_blank')}\n                  style={{\n                    background: '#FF6B35',\n                    color: 'white',\n                    border: 'none',\n                    padding: '8px 16px',\n                    borderRadius: '6px',\n                    cursor: 'pointer',\n                    marginTop: '8px'\n                  }}\n                >\n                  Partecipa al TableTalk\n                </button>\n              </div>\n            </Popup>\n          </Marker>\n        ))}\n      </MapContainer>\n    </div>\n  );\n};\n\nexport default OpenStreetMapComponent;\n","\"use client\";\n\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport { useBootstrapPrefix, useBootstrapBreakpoints, useBootstrapMinBreakpoint } from './ThemeProvider';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst Row = /*#__PURE__*/React.forwardRef(({\n  bsPrefix,\n  className,\n  // Need to define the default \"as\" during prop destructuring to be compatible with styled-components github.com/react-bootstrap/react-bootstrap/issues/3595\n  as: Component = 'div',\n  ...props\n}, ref) => {\n  const decoratedBsPrefix = useBootstrapPrefix(bsPrefix, 'row');\n  const breakpoints = useBootstrapBreakpoints();\n  const minBreakpoint = useBootstrapMinBreakpoint();\n  const sizePrefix = `${decoratedBsPrefix}-cols`;\n  const classes = [];\n  breakpoints.forEach(brkPoint => {\n    const propValue = props[brkPoint];\n    delete props[brkPoint];\n    let cols;\n    if (propValue != null && typeof propValue === 'object') {\n      ({\n        cols\n      } = propValue);\n    } else {\n      cols = propValue;\n    }\n    const infix = brkPoint !== minBreakpoint ? `-${brkPoint}` : '';\n    if (cols != null) classes.push(`${sizePrefix}${infix}-${cols}`);\n  });\n  return /*#__PURE__*/_jsx(Component, {\n    ref: ref,\n    ...props,\n    className: classNames(className, decoratedBsPrefix, ...classes)\n  });\n});\nRow.displayName = 'Row';\nexport default Row;","// extracted by mini-css-extract-plugin\nexport default {\"backButton\":\"BackButton_backButton__hBNQM\"};","// File: src/components/common/BackButton/index.js\n\nimport React from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { FaArrowLeft } from 'react-icons/fa';\nimport styles from './BackButton.module.css';\n\nconst BackButton = ({ className = '' }) => {\n  const navigate = useNavigate();\n\n  const handleBack = () => {\n    navigate(-1);\n  };\n\n  return (\n    <button onClick={handleBack} className={`${styles.backButton} ${className}`}>\n      <FaArrowLeft style={{ marginRight: 8 }} />\n      Torna indietro\n    </button>\n  );\n};\n\nexport default BackButton;","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"MealForm_form__iyuod\",\"formGroup\":\"MealForm_formGroup__Nagwi\",\"formLabel\":\"MealForm_formLabel__EuahF\",\"formControl\":\"MealForm_formControl__QOV2v\",\"dateInputContainer\":\"MealForm_dateInputContainer__tCElf\",\"dateHelperButton\":\"MealForm_dateHelperButton__ypazG\",\"formSelect\":\"MealForm_formSelect__qfqPi\",\"formCheck\":\"MealForm_formCheck__GCWf7\",\"typeSelector\":\"MealForm_typeSelector__mfJc5\",\"typeButton\":\"MealForm_typeButton__KyHCF\",\"active\":\"MealForm_active__Hpn7f\",\"typeIcon\":\"MealForm_typeIcon__XJPIu\",\"typeText\":\"MealForm_typeText__7CnAo\",\"typeDescription\":\"MealForm_typeDescription__t2zNS\",\"typeInfo\":\"MealForm_typeInfo__pB1+E\",\"visibilitySelector\":\"MealForm_visibilitySelector__WKtUp\",\"visibilityButton\":\"MealForm_visibilityButton__D2Hp1\",\"visibilityIcon\":\"MealForm_visibilityIcon__FlV5b\",\"visibilityText\":\"MealForm_visibilityText__dnQrt\",\"visibilityDescription\":\"MealForm_visibilityDescription__FL8e4\",\"visibilityInfo\":\"MealForm_visibilityInfo__-fbWG\",\"mapContainer\":\"MealForm_mapContainer__whBqK\",\"locationInfo\":\"MealForm_locationInfo__hHdUX\",\"submitButton\":\"MealForm_submitButton__fUBD0\",\"stickyActions\":\"MealForm_stickyActions__wBnhW\",\"cancelButton\":\"MealForm_cancelButton__thg-a\",\"error\":\"MealForm_error__TbffJ\",\"success\":\"MealForm_success__pUq4n\",\"loading\":\"MealForm_loading__6DqYq\"};","import type { PermissionState } from '@capacitor/core';\n\nexport type CameraPermissionState = PermissionState | 'limited';\n\nexport type CameraPermissionType = 'camera' | 'photos';\n\nexport interface PermissionStatus {\n  camera: CameraPermissionState;\n  photos: CameraPermissionState;\n}\n\nexport interface CameraPluginPermissions {\n  permissions: CameraPermissionType[];\n}\n\nexport interface CameraPlugin {\n  /**\n   * Prompt the user to pick a photo from an album, or take a new photo\n   * with the camera.\n   *\n   * @since 1.0.0\n   */\n  getPhoto(options: ImageOptions): Promise<Photo>;\n\n  /**\n   * Allows the user to pick multiple pictures from the photo gallery.\n   * On iOS 13 and older it only allows to pick one picture.\n   *\n   * @since 1.2.0\n   */\n  pickImages(options: GalleryImageOptions): Promise<GalleryPhotos>;\n\n  /**\n   * iOS 14+ Only: Allows the user to update their limited photo library selection.\n   * On iOS 15+ returns all the limited photos after the picker dismissal.\n   * On iOS 14 or if the user gave full access to the photos it returns an empty array.\n   *\n   * @since 4.1.0\n   */\n  pickLimitedLibraryPhotos(): Promise<GalleryPhotos>;\n  /**\n   * iOS 14+ Only: Return an array of photos selected from the limited photo library.\n   *\n   * @since 4.1.0\n   */\n  getLimitedLibraryPhotos(): Promise<GalleryPhotos>;\n\n  /**\n   * Check camera and photo album permissions\n   *\n   * @since 1.0.0\n   */\n  checkPermissions(): Promise<PermissionStatus>;\n\n  /**\n   * Request camera and photo album permissions\n   *\n   * @since 1.0.0\n   */\n  requestPermissions(\n    permissions?: CameraPluginPermissions,\n  ): Promise<PermissionStatus>;\n}\n\nexport interface ImageOptions {\n  /**\n   * The quality of image to return as JPEG, from 0-100\n   * Note: This option is only supported on Android and iOS\n   *\n   * @since 1.0.0\n   */\n  quality?: number;\n  /**\n   * Whether to allow the user to crop or make small edits (platform specific).\n   * On iOS 14+ it's only supported for CameraSource.Camera, but not for CameraSource.Photos.\n   *\n   * @since 1.0.0\n   */\n  allowEditing?: boolean;\n  /**\n   * How the data should be returned. Currently, only 'Base64', 'DataUrl' or 'Uri' is supported\n   *\n   * @since 1.0.0\n   */\n  resultType: CameraResultType;\n  /**\n   * Whether to save the photo to the gallery.\n   * If the photo was picked from the gallery, it will only be saved if edited.\n   * @default: false\n   *\n   * @since 1.0.0\n   */\n  saveToGallery?: boolean;\n  /**\n   * The desired maximum width of the saved image. The aspect ratio is respected.\n   *\n   * @since 1.0.0\n   */\n  width?: number;\n  /**\n   * The desired maximum height of the saved image. The aspect ratio is respected.\n   *\n   * @since 1.0.0\n   */\n  height?: number;\n  /**\n   * Whether to automatically rotate the image \"up\" to correct for orientation\n   * in portrait mode\n   * @default: true\n   *\n   * @since 1.0.0\n   */\n  correctOrientation?: boolean;\n  /**\n   * The source to get the photo from. By default this prompts the user to select\n   * either the photo album or take a photo.\n   * @default: CameraSource.Prompt\n   *\n   * @since 1.0.0\n   */\n  source?: CameraSource;\n  /**\n   * iOS and Web only: The camera direction.\n   * @default: CameraDirection.Rear\n   *\n   * @since 1.0.0\n   */\n  direction?: CameraDirection;\n\n  /**\n   * iOS only: The presentation style of the Camera.\n   * @default: 'fullscreen'\n   *\n   * @since 1.0.0\n   */\n  presentationStyle?: 'fullscreen' | 'popover';\n\n  /**\n   * Web only: Whether to use the PWA Element experience or file input. The\n   * default is to use PWA Elements if installed and fall back to file input.\n   * To always use file input, set this to `true`.\n   *\n   * Learn more about PWA Elements: https://capacitorjs.com/docs/web/pwa-elements\n   *\n   * @since 1.0.0\n   */\n  webUseInput?: boolean;\n\n  /**\n   * Text value to use when displaying the prompt.\n   * @default: 'Photo'\n   *\n   * @since 1.0.0\n   *\n   */\n  promptLabelHeader?: string;\n\n  /**\n   * Text value to use when displaying the prompt.\n   * iOS only: The label of the 'cancel' button.\n   * @default: 'Cancel'\n   *\n   * @since 1.0.0\n   */\n  promptLabelCancel?: string;\n\n  /**\n   * Text value to use when displaying the prompt.\n   * The label of the button to select a saved image.\n   * @default: 'From Photos'\n   *\n   * @since 1.0.0\n   */\n  promptLabelPhoto?: string;\n\n  /**\n   * Text value to use when displaying the prompt.\n   * The label of the button to open the camera.\n   * @default: 'Take Picture'\n   *\n   * @since 1.0.0\n   */\n  promptLabelPicture?: string;\n}\n\nexport interface Photo {\n  /**\n   * The base64 encoded string representation of the image, if using CameraResultType.Base64.\n   *\n   * @since 1.0.0\n   */\n  base64String?: string;\n  /**\n   * The url starting with 'data:image/jpeg;base64,' and the base64 encoded string representation of the image, if using CameraResultType.DataUrl.\n   *\n   * Note: On web, the file format could change depending on the browser.\n   * @since 1.0.0\n   */\n  dataUrl?: string;\n  /**\n   * If using CameraResultType.Uri, the path will contain a full,\n   * platform-specific file URL that can be read later using the Filesystem API.\n   *\n   * @since 1.0.0\n   */\n  path?: string;\n  /**\n   * webPath returns a path that can be used to set the src attribute of an image for efficient\n   * loading and rendering.\n   *\n   * @since 1.0.0\n   */\n  webPath?: string;\n  /**\n   * Exif data, if any, retrieved from the image\n   *\n   * @since 1.0.0\n   */\n  exif?: any;\n  /**\n   * The format of the image, ex: jpeg, png, gif.\n   *\n   * iOS and Android only support jpeg.\n   * Web supports jpeg, png and gif, but the exact availability may vary depending on the browser.\n   * gif is only supported if `webUseInput` is set to `true` or if `source` is set to `Photos`.\n   *\n   * @since 1.0.0\n   */\n  format: string;\n  /**\n   * Whether if the image was saved to the gallery or not.\n   *\n   * On Android and iOS, saving to the gallery can fail if the user didn't\n   * grant the required permissions.\n   * On Web there is no gallery, so always returns false.\n   *\n   * @since 1.1.0\n   */\n  saved: boolean;\n}\n\nexport interface GalleryPhotos {\n  /**\n   * Array of all the picked photos.\n   *\n   * @since 1.2.0\n   */\n  photos: GalleryPhoto[];\n}\n\nexport interface GalleryPhoto {\n  /**\n   * Full, platform-specific file URL that can be read later using the Filesystem API.\n   *\n   * @since 1.2.0\n   */\n  path?: string;\n  /**\n   * webPath returns a path that can be used to set the src attribute of an image for efficient\n   * loading and rendering.\n   *\n   * @since 1.2.0\n   */\n  webPath: string;\n  /**\n   * Exif data, if any, retrieved from the image\n   *\n   * @since 1.2.0\n   */\n  exif?: any;\n  /**\n   * The format of the image, ex: jpeg, png, gif.\n   *\n   * iOS and Android only support jpeg.\n   * Web supports jpeg, png and gif.\n   *\n   * @since 1.2.0\n   */\n  format: string;\n}\nexport interface GalleryImageOptions {\n  /**\n   * The quality of image to return as JPEG, from 0-100\n   * Note: This option is only supported on Android and iOS.\n   *\n   * @since 1.2.0\n   */\n  quality?: number;\n  /**\n   * The desired maximum width of the saved image. The aspect ratio is respected.\n   *\n   * @since 1.2.0\n   */\n  width?: number;\n  /**\n   * The desired maximum height of the saved image. The aspect ratio is respected.\n   *\n   * @since 1.2.0\n   */\n  height?: number;\n  /**\n   * Whether to automatically rotate the image \"up\" to correct for orientation\n   * in portrait mode\n   * @default: true\n   *\n   * @since 1.2.0\n   */\n  correctOrientation?: boolean;\n\n  /**\n   * iOS only: The presentation style of the Camera.\n   * @default: 'fullscreen'\n   *\n   * @since 1.2.0\n   */\n  presentationStyle?: 'fullscreen' | 'popover';\n\n  /**\n   * Maximum number of pictures the user will be able to choose.\n   * Note: This option is only supported on Android 13+ and iOS.\n   *\n   * @default 0 (unlimited)\n   *\n   * @since 1.2.0\n   */\n  limit?: number;\n}\n\nexport enum CameraSource {\n  /**\n   * Prompts the user to select either the photo album or take a photo.\n   */\n  Prompt = 'PROMPT',\n  /**\n   * Take a new photo using the camera.\n   */\n  Camera = 'CAMERA',\n  /**\n   * Pick an existing photo from the gallery or photo album.\n   */\n  Photos = 'PHOTOS',\n}\n\nexport enum CameraDirection {\n  Rear = 'REAR',\n  Front = 'FRONT',\n}\n\nexport enum CameraResultType {\n  Uri = 'uri',\n  Base64 = 'base64',\n  DataUrl = 'dataUrl',\n}\n\n/**\n * @deprecated Use `Photo`.\n * @since 1.0.0\n */\nexport type CameraPhoto = Photo;\n\n/**\n * @deprecated Use `ImageOptions`.\n * @since 1.0.0\n */\nexport type CameraOptions = ImageOptions;\n","import { WebPlugin, CapacitorException } from '@capacitor/core';\n\nimport { CameraSource, CameraDirection } from './definitions';\nimport type {\n  CameraPlugin,\n  GalleryImageOptions,\n  GalleryPhotos,\n  ImageOptions,\n  PermissionStatus,\n  Photo,\n} from './definitions';\n\nexport class CameraWeb extends WebPlugin implements CameraPlugin {\n  async getPhoto(options: ImageOptions): Promise<Photo> {\n    // eslint-disable-next-line no-async-promise-executor\n    return new Promise<Photo>(async (resolve, reject) => {\n      if (options.webUseInput || options.source === CameraSource.Photos) {\n        this.fileInputExperience(options, resolve, reject);\n      } else if (options.source === CameraSource.Prompt) {\n        let actionSheet: any = document.querySelector('pwa-action-sheet');\n        if (!actionSheet) {\n          actionSheet = document.createElement('pwa-action-sheet');\n          document.body.appendChild(actionSheet);\n        }\n        actionSheet.header = options.promptLabelHeader || 'Photo';\n        actionSheet.cancelable = false;\n        actionSheet.options = [\n          { title: options.promptLabelPhoto || 'From Photos' },\n          { title: options.promptLabelPicture || 'Take Picture' },\n        ];\n        actionSheet.addEventListener('onSelection', async (e: any) => {\n          const selection = e.detail;\n          if (selection === 0) {\n            this.fileInputExperience(options, resolve, reject);\n          } else {\n            this.cameraExperience(options, resolve, reject);\n          }\n        });\n      } else {\n        this.cameraExperience(options, resolve, reject);\n      }\n    });\n  }\n\n  async pickImages(_options: GalleryImageOptions): Promise<GalleryPhotos> {\n    // eslint-disable-next-line no-async-promise-executor\n    return new Promise<GalleryPhotos>(async (resolve, reject) => {\n      this.multipleFileInputExperience(resolve, reject);\n    });\n  }\n\n  private async cameraExperience(\n    options: ImageOptions,\n    resolve: any,\n    reject: any,\n  ) {\n    if (customElements.get('pwa-camera-modal')) {\n      const cameraModal: any = document.createElement('pwa-camera-modal');\n      cameraModal.facingMode =\n        options.direction === CameraDirection.Front ? 'user' : 'environment';\n      document.body.appendChild(cameraModal);\n      try {\n        await cameraModal.componentOnReady();\n        cameraModal.addEventListener('onPhoto', async (e: any) => {\n          const photo = e.detail;\n\n          if (photo === null) {\n            reject(new CapacitorException('User cancelled photos app'));\n          } else if (photo instanceof Error) {\n            reject(photo);\n          } else {\n            resolve(await this._getCameraPhoto(photo, options));\n          }\n\n          cameraModal.dismiss();\n          document.body.removeChild(cameraModal);\n        });\n\n        cameraModal.present();\n      } catch (e) {\n        this.fileInputExperience(options, resolve, reject);\n      }\n    } else {\n      console.error(\n        `Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements.`,\n      );\n      this.fileInputExperience(options, resolve, reject);\n    }\n  }\n\n  private fileInputExperience(\n    options: ImageOptions,\n    resolve: any,\n    reject: any,\n  ) {\n    let input = document.querySelector(\n      '#_capacitor-camera-input',\n    ) as HTMLInputElement;\n\n    const cleanup = () => {\n      input.parentNode?.removeChild(input);\n    };\n\n    if (!input) {\n      input = document.createElement('input') as HTMLInputElement;\n      input.id = '_capacitor-camera-input';\n      input.type = 'file';\n      input.hidden = true;\n      document.body.appendChild(input);\n      input.addEventListener('change', (_e: any) => {\n        const file = input.files![0];\n        let format = 'jpeg';\n\n        if (file.type === 'image/png') {\n          format = 'png';\n        } else if (file.type === 'image/gif') {\n          format = 'gif';\n        }\n\n        if (\n          options.resultType === 'dataUrl' ||\n          options.resultType === 'base64'\n        ) {\n          const reader = new FileReader();\n\n          reader.addEventListener('load', () => {\n            if (options.resultType === 'dataUrl') {\n              resolve({\n                dataUrl: reader.result,\n                format,\n              } as Photo);\n            } else if (options.resultType === 'base64') {\n              const b64 = (reader.result as string).split(',')[1];\n              resolve({\n                base64String: b64,\n                format,\n              } as Photo);\n            }\n\n            cleanup();\n          });\n\n          reader.readAsDataURL(file);\n        } else {\n          resolve({\n            webPath: URL.createObjectURL(file),\n            format: format,\n          });\n          cleanup();\n        }\n      });\n      input.addEventListener('cancel', (_e: any) => {\n        reject(new CapacitorException('User cancelled photos app'));\n        cleanup();\n      });\n    }\n\n    input.accept = 'image/*';\n    (input as any).capture = true;\n\n    if (\n      options.source === CameraSource.Photos ||\n      options.source === CameraSource.Prompt\n    ) {\n      input.removeAttribute('capture');\n    } else if (options.direction === CameraDirection.Front) {\n      (input as any).capture = 'user';\n    } else if (options.direction === CameraDirection.Rear) {\n      (input as any).capture = 'environment';\n    }\n\n    input.click();\n  }\n\n  private multipleFileInputExperience(resolve: any, reject: any) {\n    let input = document.querySelector(\n      '#_capacitor-camera-input-multiple',\n    ) as HTMLInputElement;\n\n    const cleanup = () => {\n      input.parentNode?.removeChild(input);\n    };\n\n    if (!input) {\n      input = document.createElement('input') as HTMLInputElement;\n      input.id = '_capacitor-camera-input-multiple';\n      input.type = 'file';\n      input.hidden = true;\n      input.multiple = true;\n      document.body.appendChild(input);\n      input.addEventListener('change', (_e: any) => {\n        const photos = [];\n        // eslint-disable-next-line @typescript-eslint/prefer-for-of\n        for (let i = 0; i < input.files!.length; i++) {\n          const file = input.files![i];\n          let format = 'jpeg';\n\n          if (file.type === 'image/png') {\n            format = 'png';\n          } else if (file.type === 'image/gif') {\n            format = 'gif';\n          }\n          photos.push({\n            webPath: URL.createObjectURL(file),\n            format: format,\n          });\n        }\n        resolve({ photos });\n        cleanup();\n      });\n      input.addEventListener('cancel', (_e: any) => {\n        reject(new CapacitorException('User cancelled photos app'));\n        cleanup();\n      });\n    }\n\n    input.accept = 'image/*';\n\n    input.click();\n  }\n\n  private _getCameraPhoto(photo: Blob, options: ImageOptions) {\n    return new Promise<Photo>((resolve, reject) => {\n      const reader = new FileReader();\n      const format = photo.type.split('/')[1];\n      if (options.resultType === 'uri') {\n        resolve({\n          webPath: URL.createObjectURL(photo),\n          format: format,\n          saved: false,\n        });\n      } else {\n        reader.readAsDataURL(photo);\n        reader.onloadend = () => {\n          const r = reader.result as string;\n          if (options.resultType === 'dataUrl') {\n            resolve({\n              dataUrl: r,\n              format: format,\n              saved: false,\n            });\n          } else {\n            resolve({\n              base64String: r.split(',')[1],\n              format: format,\n              saved: false,\n            });\n          }\n        };\n        reader.onerror = e => {\n          reject(e);\n        };\n      }\n    });\n  }\n\n  async checkPermissions(): Promise<PermissionStatus> {\n    if (typeof navigator === 'undefined' || !navigator.permissions) {\n      throw this.unavailable('Permissions API not available in this browser');\n    }\n\n    try {\n      // https://developer.mozilla.org/en-US/docs/Web/API/Permissions/query\n      // the specific permissions that are supported varies among browsers that implement the\n      // permissions API, so we need a try/catch in case 'camera' is invalid\n      const permission = await window.navigator.permissions.query({\n        name: 'camera',\n      });\n      return {\n        camera: permission.state,\n        photos: 'granted',\n      };\n    } catch {\n      throw this.unavailable(\n        'Camera permissions are not available in this browser',\n      );\n    }\n  }\n\n  async requestPermissions(): Promise<PermissionStatus> {\n    throw this.unimplemented('Not implemented on web.');\n  }\n\n  async pickLimitedLibraryPhotos(): Promise<GalleryPhotos> {\n    throw this.unavailable('Not implemented on web.');\n  }\n\n  async getLimitedLibraryPhotos(): Promise<GalleryPhotos> {\n    throw this.unavailable('Not implemented on web.');\n  }\n}\n\nconst Camera = new CameraWeb();\n\nexport { Camera };\n","import { registerPlugin } from '@capacitor/core';\n\nimport type { CameraPlugin } from './definitions';\nimport { CameraWeb } from './web';\n\nconst Camera = registerPlugin<CameraPlugin>('Camera', {\n  web: () => new CameraWeb(),\n});\n\nexport * from './definitions';\nexport { Camera };\n","// extracted by mini-css-extract-plugin\nexport default {\"topicInputContainer\":\"TopicInput_topicInputContainer__NfIJd\",\"topicTag\":\"TopicInput_topicTag__HTw1U\",\"removeTagButton\":\"TopicInput_removeTagButton__sDCPm\",\"topicInput\":\"TopicInput_topicInput__WbbZc\",\"inputError\":\"TopicInput_inputError__VAq+v\",\"hasError\":\"TopicInput_hasError__0Xkbf\",\"errorMessage\":\"TopicInput_errorMessage__leuM0\",\"fadeIn\":\"TopicInput_fadeIn__1ShrF\"};","import React, { useState, useEffect } from 'react';\nimport styles from './TopicInput.module.css';\n\nconst TopicInput = ({ topics, setTopics, onValidationChange }) => {\n  const [inputValue, setInputValue] = useState('');\n  const [error, setError] = useState(''); // üîí STATO ERRORE: Per feedback visivo\n\n  // üîí PULIZIA AUTOMATICA: Esegui pulizia quando il componente si monta e quando cambiano i topics\n  useEffect(() => {\n    cleanTopics();\n  }, []); // Solo al mount\n\n  // üîí NOTIFICA VALIDAZIONE: Comunica lo stato di validazione al componente padre\n  useEffect(() => {\n    if (onValidationChange) {\n      const hasValidTopics = topics.length > 0 && topics.every(topic => {\n        const trimmedTopic = topic.trim();\n        return trimmedTopic.length >= 2 && \n               trimmedTopic.length <= 50 && \n               !/^\\s+$/.test(trimmedTopic);\n      });\n      \n      onValidationChange(hasValidTopics);\n    }\n  }, [topics, onValidationChange]);\n\n  // üîí VALIDAZIONE TOPICS: Funzione per validare un nuovo argomento\n  const validateTopic = (topic) => {\n    if (typeof topic !== 'string') {\n      return { isValid: false, error: 'L\\'argomento deve essere una stringa valida' };\n    }\n    \n    const trimmedTopic = topic.trim();\n    \n    // Controllo lunghezza minima (almeno 2 caratteri)\n    if (trimmedTopic.length < 2) {\n      return { isValid: false, error: 'L\\'argomento deve essere di almeno 2 caratteri' };\n    }\n    \n    // Controllo lunghezza massima (massimo 50 caratteri)\n    if (trimmedTopic.length > 50) {\n      return { isValid: false, error: 'L\\'argomento non pu√≤ superare i 50 caratteri' };\n    }\n    \n    // Controllo duplicati (case-insensitive)\n    const isDuplicate = topics.some(existingTopic => \n      existingTopic.toLowerCase() === trimmedTopic.toLowerCase()\n    );\n    \n    if (isDuplicate) {\n      return { isValid: false, error: 'Questo argomento √® gi√† presente' };\n    }\n    \n    // Controllo caratteri speciali non desiderati\n    const hasOnlySpaces = /^\\s+$/.test(trimmedTopic);\n    if (hasOnlySpaces) {\n      return { isValid: false, error: 'L\\'argomento non pu√≤ contenere solo spazi' };\n    }\n    \n    // Controllo caratteri validi (solo lettere, numeri, spazi e caratteri accentati)\n    const hasValidCharacters = /^[\\w\\s\\u00C0-\\u017F]+$/i.test(trimmedTopic);\n    if (!hasValidCharacters) {\n      return { isValid: false, error: 'L\\'argomento pu√≤ contenere solo lettere, numeri e spazi' };\n    }\n    \n    return { isValid: true, topic: trimmedTopic };\n  };\n\n  const handleKeyDown = (e) => {\n    // Se preme \"Invio\" o \"Virgola\"\n    if (e.key === 'Enter' || e.key === ',') {\n      e.preventDefault(); // Impedisce al form di essere inviato o di scrivere la virgola\n      \n      // üîí VALIDAZIONE ROBUSTA: Controllo completo prima dell'aggiunta\n      const validation = validateTopic(inputValue);\n      \n      if (validation.isValid) {\n        if (topics.length < 5) { // Limite di 5 argomenti\n          setTopics([...topics, validation.topic]);\n          setInputValue(''); // Pulisci l'input solo se valido\n          setError(''); // üîí Pulisci errori precedenti\n        } else {\n          const limitError = 'Limite massimo di 5 argomenti raggiunto';\n          console.warn(`‚ö†Ô∏è [TopicInput] ${limitError}`);\n          setError(limitError);\n        }\n      } else {\n        // üîí FEEDBACK ERRORE: Mostra messaggio di errore visivo\n        console.warn(`‚ö†Ô∏è [TopicInput] Argomento non valido: ${validation.error}`);\n        setError(validation.error);\n      }\n    }\n  };\n\n  // üîí PULIZIA AUTOMATICA: Rimuove argomenti vuoti o non validi\n  const cleanTopics = () => {\n    if (!Array.isArray(topics) || topics.length === 0) return;\n    \n    const cleanedTopics = topics.filter(topic => {\n      if (typeof topic !== 'string') return false;\n      \n      const trimmedTopic = topic.trim();\n      // üîí VALIDAZIONE COMPLETA: Controlla lunghezza e caratteri\n      return trimmedTopic.length >= 2 && \n             trimmedTopic.length <= 50 && \n             !/^\\s+$/.test(trimmedTopic) &&\n             !/^[^\\w\\s]+$/.test(trimmedTopic) && // Non solo caratteri speciali\n             /^[\\w\\s\\u00C0-\\u017F]+$/i.test(trimmedTopic); // Solo lettere, numeri, spazi e caratteri accentati\n    });\n    \n    // Se ci sono stati cambiamenti, aggiorna la lista\n    if (cleanedTopics.length !== topics.length) {\n      console.log(`üßπ [TopicInput] Puliti ${topics.length - cleanedTopics.length} argomenti non validi`);\n      setTopics(cleanedTopics);\n    }\n  };\n\n  const removeTopic = (topicToRemove) => {\n    setTopics(topics.filter(topic => topic !== topicToRemove));\n  };\n\n  return (\n    <div className={`${styles.topicInputContainer} ${error ? styles.hasError : ''}`}>\n      {topics.map((topic, index) => (\n        <div key={index} className={styles.topicTag}>\n          {topic}\n          <button \n            type=\"button\" \n            className={styles.removeTagButton} \n            onClick={() => removeTopic(topic)}\n          >\n            &times;\n          </button>\n        </div>\n      ))}\n      <input\n        type=\"text\"\n        value={inputValue}\n        onChange={(e) => {\n          setInputValue(e.target.value);\n          // üîí PULIZIA ERRORE: Rimuovi errori quando l'utente digita\n          if (error) setError('');\n        }}\n        onKeyDown={handleKeyDown}\n        placeholder={topics.length < 5 ? 'Aggiungi un argomento...' : 'Massimo 5 argomenti'}\n        className={`${styles.topicInput} ${error ? styles.inputError : ''}`}\n        disabled={topics.length >= 5}\n      />\n      {/* üîí FEEDBACK ERRORE: Mostra messaggio di errore sotto l'input */}\n      {error && (\n        <div className={styles.errorMessage}>\n          ‚ö†Ô∏è {error}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default TopicInput;","// File: /src/components/meals/MealForm.js (Versione Corretta e Aggiornata)\n\nimport React, { useState, useEffect } from 'react';\nimport { Form, Button, Row, Col, Spinner } from 'react-bootstrap';\nimport { useTranslation } from 'react-i18next';\nimport { mealTypeOptions } from '../../../constants/mealConstants';\nimport styles from './MealForm.module.css'; \n// import dayjs from 'dayjs'; // Rimosso: non utilizzato\nimport { Camera, CameraResultType, CameraSource } from '@capacitor/camera';\nimport { Capacitor } from '@capacitor/core';\nimport TopicInput from '../TopicInput';\nimport OpenStreetMapComponent from '../../maps/OpenStreetMapComponent';\n// import PlacesAutocompleteInput from '../../Map/PlacesAutocompleteInput'; // Rimosso: manteniamo solo OpenStreetMap\nimport { sanitizeMealData, containsDangerousContent } from '../../../services/sanitizationService';\n\n        // Opzioni per la durata del TableTalk¬Æ\nconst languageOptions = ['Italiano', 'English', 'Espa√±ol', 'Fran√ßais', 'Deutsch', '‰∏≠Êñá', 'ÿßŸÑÿπÿ±ÿ®Ÿäÿ©'];\n\nconst MealForm = ({ initialData, onSubmit, onCancel, isLoading, isSubmitting, submitButtonText }) => {\n  const { t } = useTranslation();\n  \n  // Opzioni di durata tradotte\n  const durationOptions = [\n    { value: 30, label: t('meals.form.durationOptions.30min') },\n    { value: 60, label: t('meals.form.durationOptions.1hour') },\n    { value: 90, label: t('meals.form.durationOptions.1hour30') },\n    { value: 120, label: t('meals.form.durationOptions.2hours') },\n    { value: 150, label: t('meals.form.durationOptions.2hours30') },\n    { value: 180, label: t('meals.form.durationOptions.3hours') },\n  ];\n\n  // Definiamo uno stato di default pulito\n  const getInitialState = () => {\n    // üîí VALIDAZIONE DATA: Suggerisci una data valida di default\n    const now = new Date();\n    const suggestedDate = new Date(now.getTime() + 60 * 60 * 1000); // 1 ora da ora\n    \n    // Formatta per input datetime-local\n    const year = suggestedDate.getFullYear();\n    const month = String(suggestedDate.getMonth() + 1).padStart(2, '0');\n    const day = String(suggestedDate.getDate()).padStart(2, '0');\n    const hours = String(suggestedDate.getHours()).padStart(2, '0');\n    const minutes = String(suggestedDate.getMinutes()).padStart(2, '0');\n    \n    return {\n      title: '',\n      description: '',\n      mealType: 'virtual', // Aggiungi questo! Iniziamo con 'virtual' come default\n      type: 'lunch',\n      date: `${year}-${month}-${day}T${hours}:${minutes}`, // üîí Data valida di default\n      duration: 60,\n      maxParticipants: 2,\n      language: 'English',\n      topics: [],\n      location: null, // Assicurati che location sia null all'inizio\n      isPublic: true, // Di default i TableTalk¬Æ sono pubblici\n      estimatedCost: '', // Nuovo campo\n    };\n  };\n\n  const [formData, setFormData] = useState(getInitialState());\n  const [imageFile, setImageFile] = useState(null);\n  const [imagePreview, setImagePreview] = useState(null);\n  const [imageBase64, setImageBase64] = useState('');\n  const [errors, setErrors] = useState({});\n  \n  // ‚úÖ AGGIUNGI: State per location\n  const [selectedLocation, setSelectedLocation] = useState(null);\n\n  // ‚úÖ AGGIUNGI: Sincronizza selectedLocation con formData.location\n  useEffect(() => {\n    if (formData.location && formData.location.coordinates) {\n      setSelectedLocation({\n        lat: formData.location.coordinates[1],\n        lng: formData.location.coordinates[0],\n        address: formData.location.address\n      });\n    }\n  }, [formData.location]);\n\n  // üîí VALIDAZIONE DATA: Calcola la data minima valida per l'input\n  const getMinValidDateTime = () => {\n    const now = new Date();\n    // Tolleranza di 5 minuti per sincronizzazione dispositivi\n    const toleranceMs = 5 * 60 * 1000;\n    const minValidDate = new Date(now.getTime() - toleranceMs);\n    \n    // Formatta per input datetime-local (YYYY-MM-DDTHH:mm)\n    const year = minValidDate.getFullYear();\n    const month = String(minValidDate.getMonth() + 1).padStart(2, '0');\n    const day = String(minValidDate.getDate()).padStart(2, '0');\n    const hours = String(minValidDate.getHours()).padStart(2, '0');\n    const minutes = String(minValidDate.getMinutes()).padStart(2, '0');\n    \n    return `${year}-${month}-${day}T${hours}:${minutes}`;\n  };\n\n  // Funzione di validazione\n  const validateField = (name, value) => {\n    switch (name) {\n      case 'title':\n        if (!value.trim()) return t('meals.form.titleRequired');\n        if (value.trim().length < 5) return t('meals.form.titleMinLength');\n        if (value.trim().length > 50) return t('meals.form.titleMaxLength');\n        \n        // üõ°Ô∏è PROTEZIONE XSS: Controlla contenuto pericoloso\n        if (containsDangerousContent(value)) {\n          return 'Il titolo contiene contenuto non permesso (HTML/JavaScript)';\n        }\n        break;\n      case 'description':\n        if (!value.trim()) return t('meals.form.descriptionRequired');\n        if (value.trim().length < 10) return t('meals.form.descriptionMinLength');\n        if (value.trim().length > 1000) return t('meals.form.descriptionMaxLength');\n        \n        // üõ°Ô∏è PROTEZIONE XSS: Controlla contenuto pericoloso\n        if (containsDangerousContent(value)) {\n          return 'La descrizione contiene contenuto non permesso (HTML/JavaScript)';\n        }\n        break;\n      case 'date':\n        if (!value) return t('meals.form.dateRequired');\n        \n        // üîí VALIDAZIONE DATA: Impedisce selezione date passate\n        const selectedDate = new Date(value);\n        const now = new Date();\n        \n        // Tolleranza di 5 minuti per sincronizzazione dispositivi\n        const toleranceMs = 5 * 60 * 1000; // 5 minuti\n        const minValidDate = new Date(now.getTime() - toleranceMs);\n        \n        if (selectedDate < minValidDate) {\n          return t('meals.form.datePast') || 'La data deve essere nel futuro';\n        }\n        \n        // Validazione aggiuntiva: non permettere date troppo lontane nel futuro (es. > 1 anno)\n        const maxFutureDate = new Date(now.getFullYear() + 1, now.getMonth(), now.getDate());\n        if (selectedDate > maxFutureDate) {\n          return t('meals.form.dateTooFar') || 'La data non pu√≤ essere pi√π di un anno nel futuro';\n        }\n        \n        break;\n      case 'maxParticipants':\n        if (!value || value < 2) return t('meals.form.maxParticipantsMin');\n        if (value > 10) return t('meals.form.maxParticipantsMax');\n        break;\n      case 'topics':\n        // Opzionale: niente errore se vuoto\n        return '';\n      case 'location':\n        if (formData.mealType === 'physical' && !value) return t('meals.form.locationRequired');\n        break;\n      default:\n        return '';\n    }\n    return '';\n  };\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    \n    // üîí VALIDAZIONE DATA SPECIALE: Controllo immediato per date non valide\n    if (name === 'date' && value) {\n      const selectedDate = new Date(value);\n      const now = new Date();\n      const toleranceMs = 5 * 60 * 1000; // 5 minuti\n      const minValidDate = new Date(now.getTime() - toleranceMs);\n      \n      // Se la data selezionata √® nel passato, resetta il campo\n      if (selectedDate < minValidDate) {\n        console.warn('‚ö†Ô∏è [MealForm] Data nel passato selezionata, reset campo');\n        setFormData(prev => ({ ...prev, date: '' }));\n        setErrors(prev => ({\n          ...prev,\n          date: t('meals.form.datePast') || 'La data deve essere nel futuro'\n        }));\n        return;\n      }\n    }\n    \n    setFormData(prev => ({ ...prev, [name]: value }));\n    \n    // Validazione in tempo reale\n    const error = validateField(name, value);\n    setErrors(prev => ({\n      ...prev,\n      [name]: error\n    }));\n  };\n\n  const handleBlur = (e) => {\n    const { name, value } = e.target;\n    const error = validateField(name, value);\n    setErrors(prev => ({\n      ...prev,\n      [name]: error\n    }));\n  };\n\n  const handleTopicsChange = (newTopics) => {\n    setFormData(prev => ({ ...prev, topics: newTopics }));\n    \n    // Validazione per i topics\n    const error = validateField('topics', newTopics);\n    setErrors(prev => ({\n      ...prev,\n      topics: error\n    }));\n  };\n\n  // ‚úÖ AGGIUNGI: Funzione per geocodificare un indirizzo (testo -> coordinate)\n  const geocodeAddress = async (address) => {\n    if (!address || address.trim().length < 3) {\n      return null;\n    }\n\n    try {\n      // Usa Nominatim API (OpenStreetMap) per geocodificare\n      const response = await fetch(\n        `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(address)}&limit=1&addressdetails=1`,\n        {\n          headers: {\n            'User-Agent': 'TableTalk App' // Richiesto da Nominatim\n          }\n        }\n      );\n      \n      const data = await response.json();\n      \n      if (data && data.length > 0) {\n        const result = data[0];\n        return {\n          lat: parseFloat(result.lat),\n          lng: parseFloat(result.lon),\n          address: result.display_name || address\n        };\n      }\n      \n      return null;\n    } catch (error) {\n      console.error('Errore geocodifica indirizzo:', error);\n      return null;\n    }\n  };\n\n  // ‚úÖ AGGIUNGI: Handler per selezione location dalla mappa\n  const handleLocationSelect = async (location) => {\n    // Se non c'√® un indirizzo, prova a fare reverse geocoding\n    let address = location.address;\n    \n    if (!address && location.lat && location.lng) {\n      try {\n        // Reverse geocoding: coordinate -> indirizzo\n        const response = await fetch(\n          `https://nominatim.openstreetmap.org/reverse?format=json&lat=${location.lat}&lon=${location.lng}&addressdetails=1`,\n          {\n            headers: {\n              'User-Agent': 'TableTalk App'\n            }\n          }\n        );\n        \n        const data = await response.json();\n        if (data && data.display_name) {\n          address = data.display_name;\n        }\n      } catch (error) {\n        console.error('Errore reverse geocoding:', error);\n      }\n    }\n\n    const finalAddress = address || `${location.lat.toFixed(4)}, ${location.lng.toFixed(4)}`;\n    \n    setSelectedLocation({\n      ...location,\n      address: finalAddress\n    });\n    \n    setFormData(prev => ({\n      ...prev,\n      location: {\n        address: finalAddress,\n        coordinates: [location.lng, location.lat] // MongoDB usa [lng, lat]\n      }\n    }));\n    \n    // Rimuovi errori di location se presenti\n    setErrors(prev => ({\n      ...prev,\n      location: null\n    }));\n  };\n\n  // ‚úÖ AGGIUNGI: Handler per quando l'utente digita l'indirizzo manualmente\n  const handleAddressChange = async (e) => {\n    const address = e.target.value;\n    \n    // Aggiorna il campo indirizzo nel formData\n    setFormData(prev => ({\n      ...prev,\n      location: prev.location ? {\n        ...prev.location,\n        address: address\n      } : {\n        address: address,\n        coordinates: null\n      }\n    }));\n\n    // Se l'indirizzo √® vuoto, resetta la location\n    if (!address || address.trim().length === 0) {\n      setSelectedLocation(null);\n      setFormData(prev => ({\n        ...prev,\n        location: null\n      }));\n      return;\n    }\n  };\n\n  // ‚úÖ AGGIUNGI: Handler per quando l'utente finisce di digitare l'indirizzo (blur o Enter)\n  const handleAddressBlur = async (e) => {\n    const address = e.target.value.trim();\n    \n    if (!address || address.length < 3) {\n      return;\n    }\n\n    // Mostra un indicatore di caricamento\n    setErrors(prev => ({\n      ...prev,\n      location: 'Ricerca indirizzo...'\n    }));\n\n    // Geocodifica l'indirizzo\n    const location = await geocodeAddress(address);\n    \n    if (location) {\n      // Aggiorna la mappa con la posizione trovata\n      setSelectedLocation(location);\n      setFormData(prev => ({\n        ...prev,\n        location: {\n          address: location.address,\n          coordinates: [location.lng, location.lat]\n        }\n      }));\n      \n      // Rimuovi errori\n      setErrors(prev => ({\n        ...prev,\n        location: null\n      }));\n    } else {\n      // Indirizzo non trovato\n      setErrors(prev => ({\n        ...prev,\n        location: 'Indirizzo non trovato. Prova a selezionarlo dalla mappa.'\n      }));\n    }\n  };\n\n  // ‚úÖ Funzione per processare un file immagine (usata sia per web che mobile)\n  const processImageFile = async (file, fileName = 'image.jpg') => {\n    // Verifica che sia un'immagine\n    if (!file.type || !file.type.startsWith('image/')) {\n      alert('Seleziona solo file immagine');\n      return;\n    }\n\n    // Verifica dimensione (max 10MB)\n    if (file.size > 10 * 1024 * 1024) {\n      alert('Il file √® troppo grande. Massimo 10MB.');\n      return;\n    }\n\n    try {\n      // Crea preview\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        setImagePreview(e.target.result);\n      };\n      reader.readAsDataURL(file);\n\n      // Comprimi se necessario\n      let processedFile = file;\n      if (file.size > 4 * 1024 * 1024) {\n        const blob = await compressImageBlob(file, { maxWidth: 1600, quality: 0.7 });\n        processedFile = new File([blob], fileName, { type: 'image/jpeg' });\n      }\n\n      setImageFile(processedFile);\n      \n      // Genera base64 come fallback\n      try {\n        const base64 = await blobToBase64(processedFile);\n        if (typeof base64 === 'string') setImageBase64(base64);\n      } catch (_) {}\n\n      console.log('üìÅ File selezionato:', processedFile.name, processedFile.size);\n    } catch (error) {\n      console.error(\"Errore elaborazione file\", error);\n    }\n  };\n\n  // ‚úÖ Funzione per selezionare foto usando Capacitor Camera (mobile)\n  const handleCameraSelect = async (source = CameraSource.Photos) => {\n    try {\n      // Richiedi permessi esplicitamente\n      const permissionStatus = await Camera.checkPermissions();\n      \n      if (permissionStatus.camera === 'denied' || permissionStatus.photos === 'denied') {\n        // Richiedi permessi se non concessi\n        const requestResult = await Camera.requestPermissions({\n          permissions: ['camera', 'photos']\n        });\n        \n        if (requestResult.camera === 'denied' || requestResult.photos === 'denied') {\n          alert('I permessi per fotocamera e libreria foto sono necessari per caricare le immagini.');\n          return;\n        }\n      }\n\n      // Apri la fotocamera o la libreria foto\n      const image = await Camera.getPhoto({\n        quality: 90,\n        allowEditing: false,\n        resultType: CameraResultType.DataUrl,\n        source: source,\n        width: 1600,\n        height: 1600\n      });\n\n      if (image && image.dataUrl) {\n        // Converti dataUrl in File\n        const response = await fetch(image.dataUrl);\n        const blob = await response.blob();\n        const file = new File([blob], `photo_${Date.now()}.jpg`, { type: 'image/jpeg' });\n        \n        await processImageFile(file, file.name);\n      }\n    } catch (error) {\n      console.error('Errore selezione foto:', error);\n      alert('Errore durante la selezione della foto. Riprova.');\n    }\n  };\n\n  // üìÅ Gestione upload file dal computer (per browser web)\n  const handleFileSelect = async (event) => {\n    const file = event.target.files[0];\n    if (!file) return;\n    await processImageFile(file);\n  };\n\n  // Comprimi immagine usando canvas\n  const compressImageBlob = async (blob, { maxWidth = 1600, quality = 0.7 } = {}) => {\n    try {\n      const imageBitmap = await createImageBitmap(blob);\n      const scale = Math.min(1, maxWidth / imageBitmap.width);\n      const targetWidth = Math.round(imageBitmap.width * scale);\n      const targetHeight = Math.round(imageBitmap.height * scale);\n      const canvas = document.createElement('canvas');\n      canvas.width = targetWidth;\n      canvas.height = targetHeight;\n      const ctx = canvas.getContext('2d');\n      ctx.drawImage(imageBitmap, 0, 0, targetWidth, targetHeight);\n      const dataUrl = canvas.toDataURL('image/jpeg', quality);\n      const res = await fetch(dataUrl);\n      return await res.blob();\n    } catch (e) {\n      // in caso di fallimento, restituisci l'originale\n      return blob;\n    }\n  };\n\n  const blobToBase64 = (blob) => new Promise((resolve, reject) => {\n    try {\n      const reader = new FileReader();\n      reader.onloadend = () => resolve(reader.result);\n      reader.onerror = reject;\n      reader.readAsDataURL(blob);\n    } catch (e) { reject(e); }\n  });\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    \n    // üîí VALIDAZIONE DATA FINALE: Controllo aggiuntivo prima del submit\n    if (formData.date) {\n      const selectedDate = new Date(formData.date);\n      const now = new Date();\n      const toleranceMs = 5 * 60 * 1000; // 5 minuti\n      const minValidDate = new Date(now.getTime() - toleranceMs);\n      \n      if (selectedDate < minValidDate) {\n        console.warn('‚ö†Ô∏è [MealForm] Submit bloccato: data nel passato rilevata');\n        setErrors(prev => ({\n          ...prev,\n          date: t('meals.form.datePast') || 'La data deve essere nel futuro'\n        }));\n        return; // Blocca il submit\n      }\n    }\n    \n    // Validazione completa prima del submit\n    const newErrors = {};\n    Object.keys(formData).forEach(key => {\n      const error = validateField(key, formData[key]);\n      if (error) newErrors[key] = error;\n    });\n    \n    if (Object.keys(newErrors).length > 0) {\n      setErrors(newErrors);\n      return; // Non procedere se ci sono errori\n    }\n\n    // üõ°Ô∏è PROTEZIONE XSS: Sanitizza tutti i dati prima dell'invio\n    const sanitizedData = sanitizeMealData(formData);\n    \n    // Log per debugging (solo in development)\n    if (process.env.NODE_ENV === 'development') {\n      const hasChanges = JSON.stringify(sanitizedData) !== JSON.stringify(formData);\n      if (hasChanges) {\n        console.log('üõ°Ô∏è [MealForm] Dati sanitizzati prima dell\\'invio:', {\n          original: formData,\n          sanitized: sanitizedData\n        });\n      }\n    }\n\n    const formDataToSend = new FormData();\n    const dataToProcess = { ...sanitizedData };\n\n    if (dataToProcess.date) {\n      dataToProcess.date = new Date(dataToProcess.date).toISOString();\n    }\n\n    for (const key in dataToProcess) {\n      if (key === 'topics' && Array.isArray(dataToProcess[key])) {\n        dataToProcess[key].forEach(topic => formDataToSend.append('topics', topic));\n      } else if (key === 'location' && dataToProcess[key]) {\n        // Per i TableTalk¬Æ fisici, aggiungi la location\n        formDataToSend.append('location', JSON.stringify(dataToProcess[key]));\n      } else if (key !== 'location' || formData.mealType === 'physical') {\n        // Aggiungi tutti i campi tranne location se √® virtuale\n        formDataToSend.append(key, dataToProcess[key]);\n      }\n    }\n    \n    if (imageFile) {\n      formDataToSend.append('image', imageFile);\n      if (imageBase64) {\n        formDataToSend.append('imageBase64', imageBase64);\n      }\n      if (imagePreview) {\n        formDataToSend.append('imageLocalUri', imagePreview);\n      }\n    }\n    \n    onSubmit(formDataToSend);\n  };\n\n  return (\n    <Form onSubmit={handleSubmit} className={styles.form}>\n              {/* Sezione Tipo di TableTalk¬Æ con pulsanti personalizzati */}\n      <div className={styles.formGroup}>\n        <label className={styles.formLabel}>{t('meals.form.typeLabel')}</label>\n        <div className={styles.typeSelector}>\n          <button\n            type=\"button\" // Importante per non inviare il form\n            className={`${styles.typeButton} ${formData.mealType === 'virtual' ? styles.active : ''}`}\n            onClick={() => setFormData({ ...formData, mealType: 'virtual', location: null })} // Resetta la location se si sceglie virtuale\n          >\n            <span className={styles.typeIcon}>üé•</span>\n            <span className={styles.typeText}>{t('meals.form.virtualType')}</span>\n            <small className={styles.typeDescription}>{t('meals.form.virtualDescription')}</small>\n          </button>\n          <button\n            type=\"button\"\n            className={`${styles.typeButton} ${formData.mealType === 'physical' ? styles.active : ''}`}\n            onClick={() => setFormData({ ...formData, mealType: 'physical' })}\n          >\n            <span className={styles.typeIcon}>üìç</span>\n            <span className={styles.typeText}>{t('meals.form.physicalType')}</span>\n            <small className={styles.typeDescription}>{t('meals.form.physicalDescription')}</small>\n          </button>\n        </div>\n        <div className={styles.typeInfo}>\n          {formData.mealType === 'virtual' \n            ? t('meals.form.virtualInfo')\n            : t('meals.form.physicalInfo')\n          }\n        </div>\n      </div>\n\n              {/* Sezione Visibilit√† - solo per TableTalk¬Æ fisici */}\n      {formData.mealType === 'physical' && (\n        <div className={styles.formGroup}>\n          <label className={styles.formLabel}>{t('meals.form.visibilityLabel')}</label>\n          <div className={styles.visibilitySelector}>\n            <button\n              type=\"button\"\n              className={`${styles.visibilityButton} ${formData.isPublic ? styles.active : ''}`}\n              onClick={() => setFormData({ ...formData, isPublic: true })}\n            >\n              <span className={styles.visibilityIcon}>üåç</span>\n              <span className={styles.visibilityText}>{t('meals.form.publicVisibility')}</span>\n              <small className={styles.visibilityDescription}>{t('meals.form.publicDescription')}</small>\n            </button>\n            <button\n              type=\"button\"\n              className={`${styles.visibilityButton} ${!formData.isPublic ? styles.active : ''}`}\n              onClick={() => setFormData({ ...formData, isPublic: false })}\n            >\n              <span className={styles.visibilityIcon}>üîí</span>\n              <span className={styles.visibilityText}>{t('meals.form.privateVisibility')}</span>\n              <small className={styles.visibilityDescription}>{t('meals.form.privateDescription')}</small>\n            </button>\n          </div>\n          <div className={styles.visibilityInfo}>\n            {formData.isPublic \n                          ? t('meals.form.publicInfo')\n            : t('meals.form.privateInfo')\n            }\n          </div>\n        </div>\n      )}\n\n      <Form.Group className=\"mb-3\">\n        <Form.Label className={styles.formLabel}>{t('meals.form.titleLabel')}</Form.Label>\n        <Form.Control \n          className={`${styles.formControl} ${errors.title ? 'is-invalid' : ''}`}\n          type=\"text\" \n          name=\"title\" \n          value={formData.title} \n          onChange={handleChange}\n          onBlur={handleBlur}\n          required \n        />\n        {errors.title && <div className=\"invalid-feedback\">{errors.title}</div>}\n      </Form.Group>\n      \n      <Form.Group className=\"mb-3\">\n        <Form.Label className={styles.formLabel}>{t('meals.form.descriptionLabel')}</Form.Label>\n        <Form.Control \n          className={`${styles.formControl} ${errors.description ? 'is-invalid' : ''}`}\n          as=\"textarea\" \n          rows={3} \n          name=\"description\" \n          value={formData.description} \n          onChange={handleChange}\n          onBlur={handleBlur}\n          required \n        />\n        {errors.description && <div className=\"invalid-feedback\">{errors.description}</div>}\n      </Form.Group>\n\n      <Row className=\"mb-3\">\n        <Col md={6}>\n            <Form.Group>\n                <Form.Label className={styles.formLabel}>{t('meals.form.categoryLabel')}</Form.Label>\n                <Form.Select className={styles.formSelect} name=\"type\" value={formData.type} onChange={handleChange} required>\n                    <option value=\"\" disabled>{t('meals.form.selectCategory')}</option>\n                    {mealTypeOptions.map(opt => <option key={opt.value} value={opt.value}>{opt.label}</option>)}\n                </Form.Select>\n            </Form.Group>\n        </Col>\n        <Col md={6}>\n            <Form.Group>\n                <Form.Label className={styles.formLabel}>{t('meals.form.maxParticipantsLabel')}</Form.Label>\n                <Form.Control \n                  className={`${styles.formControl} ${errors.maxParticipants ? 'is-invalid' : ''}`}\n                  type=\"number\" \n                  name=\"maxParticipants\" \n                  value={formData.maxParticipants} \n                  onChange={handleChange}\n                  onBlur={handleBlur}\n                  required \n                  min=\"2\" \n                  max=\"10\" \n                />\n                {errors.maxParticipants && <div className=\"invalid-feedback\">{errors.maxParticipants}</div>}\n            </Form.Group>\n        </Col>\n      </Row>\n\n      <Row className=\"mb-3\">\n        <Col xs={12} md={6}>\n            <Form.Group>\n                <Form.Label className={styles.formLabel}>{t('meals.form.languageLabel')}</Form.Label>\n                <Form.Select className={styles.formSelect} name=\"language\" value={formData.language} onChange={handleChange} required>\n                    {languageOptions.map(lang => <option key={lang} value={lang}>{lang}</option>)}\n                </Form.Select>\n            </Form.Group>\n        </Col>\n        <Col xs={12} md={6}>\n            <Form.Group>\n                <Form.Label className={styles.formLabel}>{t('meals.form.durationLabel')}</Form.Label>\n                <Form.Select className={styles.formSelect} name=\"duration\" value={formData.duration} onChange={handleChange} required>\n                    {durationOptions.map(opt => <option key={opt.value} value={opt.value}>{opt.label}</option>)}\n                </Form.Select>\n            </Form.Group>\n        </Col>\n      </Row>\n\n      {/* Prezzo Stimato - Solo per pasti fisici */}\n      {formData.mealType === 'physical' && (\n        <Row className=\"mb-3\">\n          <Col md={6}>\n            <Form.Group>\n              <Form.Label className={styles.formLabel}>{t('meals.form.priceLabel') || 'Prezzo Stimato (‚Ç¨)'}</Form.Label>\n              <div className=\"input-group\">\n                <span className=\"input-group-text\">‚Ç¨</span>\n                <Form.Control\n                  className={styles.formControl}\n                  type=\"number\"\n                  name=\"estimatedCost\"\n                  value={formData.estimatedCost}\n                  onChange={handleChange}\n                  placeholder=\"Es. 25\"\n                  min=\"0\"\n                />\n              </div>\n              <Form.Text className=\"text-muted\">\n                Costo medio a persona (solo indicativo)\n              </Form.Text>\n            </Form.Group>\n          </Col>\n        </Row>\n      )}\n\n      <Row className=\"mb-3\">\n        <Col xs={12} md={6}>\n            <Form.Group>\n                <Form.Label className={styles.formLabel}>{t('meals.form.dateLabel')}</Form.Label>\n                <div className={styles.dateInputContainer}>\n                  <Form.Control \n                    className={`${styles.formControl} ${errors.date ? 'is-invalid' : ''}`}\n                    type=\"datetime-local\" \n                    name=\"date\" \n                    value={formData.date} \n                    min={getMinValidDateTime()} // üîí Impedisce selezione date passate\n                    onChange={handleChange}\n                    onBlur={handleBlur}\n                    required \n                  />\n                  <button\n                    type=\"button\"\n                    className={styles.dateHelperButton}\n                    onClick={() => {\n                      // üîí SUGGERIMENTO DATA: Imposta una data valida di default\n                      const now = new Date();\n                      const suggestedDate = new Date(now.getTime() + 60 * 60 * 1000); // 1 ora da ora\n                      \n                      const year = suggestedDate.getFullYear();\n                      const month = String(suggestedDate.getMonth() + 1).padStart(2, '0');\n                      const day = String(suggestedDate.getDate()).padStart(2, '0');\n                      const hours = String(suggestedDate.getHours()).padStart(2, '0');\n                      const minutes = String(suggestedDate.getMinutes()).padStart(2, '0');\n                      \n                      const formattedDate = `${year}-${month}-${day}T${hours}:${minutes}`;\n                      setFormData(prev => ({ ...prev, date: formattedDate }));\n                      \n                      // Pulisci eventuali errori\n                      setErrors(prev => ({ ...prev, date: '' }));\n                    }}\n                    title=\"Suggerisci data valida (1 ora da ora)\"\n                  >\n                    üïê\n                  </button>\n                </div>\n                {errors.date && <div className=\"invalid-feedback\">{errors.date}</div>}\n                <Form.Text className=\"text-muted\">\n                  üìÖ Seleziona una data e ora nel futuro\n                </Form.Text>\n            </Form.Group>\n        </Col>\n        <Col xs={12} md={6}>\n            {/* Campo per la posizione - visibile solo per TableTalk¬Æ fisici */}\n            {formData.mealType === 'physical' && (\n              <Form.Group>\n                <Form.Label className={styles.formLabel}>{t('meals.form.addressLabel')}</Form.Label>\n                <Form.Control \n                  className={`${styles.formControl} ${errors.location && errors.location !== 'Ricerca indirizzo...' ? 'is-invalid' : ''}`}\n                  type=\"text\" \n                  name=\"address\" \n                  value={formData.location?.address || ''} \n                  onChange={handleAddressChange}\n                  onBlur={handleAddressBlur}\n                  onKeyDown={(e) => {\n                    // Quando l'utente preme Enter, geocodifica l'indirizzo\n                    if (e.key === 'Enter') {\n                      e.preventDefault();\n                      handleAddressBlur(e);\n                    }\n                  }}\n                  placeholder={t('meals.form.addressPlaceholder')}\n                />\n                {errors.location && (\n                  <div className={errors.location === 'Ricerca indirizzo...' ? 'text-info' : 'invalid-feedback'}>\n                    {errors.location}\n                  </div>\n                )}\n                <Form.Text className=\"text-muted\">\n                  üìç Inserisci l'indirizzo manualmente o selezionalo dalla mappa sottostante\n                </Form.Text>\n              </Form.Group>\n            )}\n        </Col>\n      </Row>\n\n              {/* ‚úÖ SEZIONE MAPPA CON OPENSTREETMAP */}\n      {formData.mealType === 'physical' && (\n        <div className={styles.formGroup}>\n          <label>üìç Seleziona posizione del pasto:</label>\n          <OpenStreetMapComponent\n            selectedLocation={selectedLocation}\n            onLocationSelect={handleLocationSelect}\n            height=\"300px\"\n            center={\n              selectedLocation \n                ? [selectedLocation.lat, selectedLocation.lng]\n                : formData.location && formData.location.coordinates\n                  ? [formData.location.coordinates[1], formData.location.coordinates[0]]\n                  : [45.4642, 9.1900] // Milano di default\n            }\n          />\n          {/* Eventuale visualizzazione indirizzo selezionato */}\n          {selectedLocation && (\n            <div className=\"selected-location-info\" style={{ \n              marginTop: '10px', \n              padding: '10px', \n              backgroundColor: '#f8f9fa', \n              borderRadius: '8px',\n              border: '1px solid #dee2e6'\n            }}>\n              ‚úÖ <strong>Posizione selezionata:</strong><br />\n              <span style={{ fontSize: '14px', color: '#666' }}>\n                {selectedLocation.address || \n                 `Lat: ${selectedLocation.lat.toFixed(4)}, Lng: ${selectedLocation.lng.toFixed(4)}`}\n              </span>\n            </div>\n              )}\n        </div>\n      )}\n      \n      <Form.Group className=\"mb-3\">\n          <Form.Label className={styles.formLabel}>{t('meals.form.topicsLabel')}</Form.Label>\n          <TopicInput topics={formData.topics} setTopics={handleTopicsChange} />\n          {errors.topics && <div className=\"invalid-feedback d-block\">{errors.topics}</div>}\n          <Form.Text>{t('meals.form.topicsHelp')}</Form.Text>\n      </Form.Group>\n      \n      <Form.Group className=\"mb-3\">\n        <Form.Label>{t('meals.form.coverImageLabel')}</Form.Label>\n        {imagePreview && <img src={imagePreview} alt={t('meals.form.coverImageAlt')} className={styles.imagePreview} />}\n        \n        {/* üì± Su mobile (Capacitor), mostra pulsanti per fotocamera/libreria */}\n        {Capacitor.isNativePlatform() ? (\n          <div className=\"mt-2\">\n            <div className=\"d-flex gap-2 flex-wrap\">\n              <Button\n                variant=\"outline-primary\"\n                onClick={() => handleCameraSelect(CameraSource.Camera)}\n                style={{ fontSize: '0.9em' }}\n              >\n                üì∑ Fotocamera\n              </Button>\n              <Button\n                variant=\"outline-primary\"\n                onClick={() => handleCameraSelect(CameraSource.Photos)}\n                style={{ fontSize: '0.9em' }}\n              >\n                üñºÔ∏è Libreria Foto\n              </Button>\n            </div>\n            <Form.Text className=\"text-muted d-block mt-2\">\n              Seleziona una foto dalla fotocamera o dalla libreria (max 10MB)\n            </Form.Text>\n          </div>\n        ) : (\n          /* üìÅ Su web, usa input file standard */\n          <>\n            <Form.Control\n              type=\"file\"\n              accept=\"image/*\"\n              onChange={handleFileSelect}\n              className=\"mt-2\"\n              style={{ fontSize: '0.9em' }}\n            />\n            <Form.Text className=\"text-muted\">\n              Seleziona un'immagine dal tuo dispositivo (max 10MB)\n            </Form.Text>\n          </>\n        )}\n        \n        {/* üîÑ Indicatore stato immagine */}\n        {imageFile && (\n          <div className=\"mt-2 p-2 bg-light rounded\" style={{ fontSize: '0.9em' }}>\n            <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\n              <span>üì∑ Immagine selezionata</span>\n              <small className=\"text-muted\">\n                {imageFile.name} ({(imageFile.size / 1024 / 1024).toFixed(2)} MB)\n              </small>\n            </div>\n            <small className=\"text-muted d-block mt-1\">\n              L'immagine verr√† caricata insieme al pasto\n            </small>\n          </div>\n        )}\n      </Form.Group>\n      \n      <div className={styles.stickyActions}>\n        <Button \n          variant=\"primary\" \n          type=\"submit\" \n          className={styles.submitButton} \n          disabled={isLoading || isSubmitting}\n        >\n          {isLoading || isSubmitting ? (\n            <>\n              <Spinner as=\"span\" animation=\"border\" size=\"sm\" />\n              <span> {isSubmitting ? t('meals.form.saving') : t('meals.form.loading')}</span>\n            </>\n          ) : (\n            submitButtonText || t('forms.save')\n          )}\n        </Button>\n      </div>\n    </Form>\n  );\n};\n\nexport default MealForm;","import DOMPurify from 'dompurify';\n\n/**\n * üõ°Ô∏è SERVIZIO SANITIZZAZIONE FRONTEND\n * Protegge da attacchi XSS sanitizzando tutti gli input utente\n */\n\n// Configurazione DOMPurify per massima sicurezza\nconst PURIFY_CONFIG = {\n  ALLOWED_TAGS: [], // Nessun tag HTML permesso\n  ALLOWED_ATTR: [], // Nessun attributo permesso\n  ALLOW_DATA_ATTR: false, // Non permettere data attributes\n  ALLOW_UNKNOWN_PROTOCOLS: false, // Non permettere protocolli sconosciuti\n  RETURN_DOM: false, // Ritorna stringa, non DOM\n  RETURN_DOM_FRAGMENT: false, // Non ritornare frammenti DOM\n  RETURN_TRUSTED_TYPE: false, // Non ritornare trusted types\n  KEEP_CONTENT: false, // Non mantenere contenuto non permesso\n  IN_PLACE: false, // Non modificare l'originale\n  SANITIZE_DOM: true, // Sanitizza il DOM se necessario\n  WHOLE_DOCUMENT: false, // Non sanitizzare tutto il documento\n  RETURN_DOM_IMPORT: false, // Non importare DOM\n  FORCE_BODY: false, // Non forzare body tag\n  SANITIZE_NAMED_PROPS: false, // Non sanitizzare named properties\n  ALLOWED_URI_REGEXP: /^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i, // Solo protocolli sicuri\n};\n\n/**\n * üßπ Sanitizza una stringa rimuovendo HTML e JavaScript pericoloso\n * @param {string} input - Stringa da sanitizzare\n * @param {boolean} allowBasicFormatting - Permette formattazione base (false per massima sicurezza)\n * @returns {string} - Stringa sanitizzata\n */\nexport const sanitizeString = (input, allowBasicFormatting = false) => {\n  if (!input || typeof input !== 'string') {\n    return '';\n  }\n\n  try {\n    // Configurazione personalizzata per formattazione base se richiesto\n    const config = allowBasicFormatting \n      ? {\n          ...PURIFY_CONFIG,\n          ALLOWED_TAGS: ['b', 'i', 'em', 'strong', 'u'], // Solo formattazione base\n          ALLOWED_ATTR: [], // Nessun attributo\n        }\n      : PURIFY_CONFIG;\n\n    // Sanitizza la stringa\n    const sanitized = DOMPurify.sanitize(input, config);\n    \n    // Log per debugging (solo in development)\n    if (process.env.NODE_ENV === 'development' && sanitized !== input) {\n      console.log('üõ°Ô∏è [SanitizationService] Stringa sanitizzata:', {\n        original: input,\n        sanitized: sanitized,\n        removed: input.length - sanitized.length\n      });\n    }\n\n    return sanitized;\n  } catch (error) {\n    console.error('‚ùå [SanitizationService] Errore sanitizzazione:', error);\n    // In caso di errore, ritorna stringa vuota per sicurezza\n    return '';\n  }\n};\n\n/**\n * üîí Sanitizza un oggetto rimuovendo HTML da tutti i campi di testo\n * @param {Object} obj - Oggetto da sanitizzare\n * @param {Array} textFields - Array di nomi campi da sanitizzare\n * @param {boolean} allowBasicFormatting - Permette formattazione base\n * @returns {Object} - Oggetto sanitizzato\n */\nexport const sanitizeObject = (obj, textFields = [], allowBasicFormatting = false) => {\n  if (!obj || typeof obj !== 'object') {\n    return obj;\n  }\n\n  const sanitized = { ...obj };\n\n  // Se non sono specificati campi, sanitizza tutti i campi stringa\n  const fieldsToSanitize = textFields.length > 0 \n    ? textFields \n    : Object.keys(obj).filter(key => typeof obj[key] === 'string');\n\n  fieldsToSanitize.forEach(field => {\n    if (sanitized[field] && typeof sanitized[field] === 'string') {\n      sanitized[field] = sanitizeString(sanitized[field], allowBasicFormatting);\n    }\n  });\n\n  return sanitized;\n};\n\n/**\n * üßπ Sanitizza un array di stringhe\n * @param {Array} array - Array di stringhe da sanitizzare\n * @param {boolean} allowBasicFormatting - Permette formattazione base\n * @returns {Array} - Array sanitizzato\n */\nexport const sanitizeArray = (array, allowBasicFormatting = false) => {\n  if (!Array.isArray(array)) {\n    return [];\n  }\n\n  return array.map(item => {\n    if (typeof item === 'string') {\n      return sanitizeString(item, allowBasicFormatting);\n    }\n    return item;\n  });\n};\n\n/**\n * üîç Valida se una stringa contiene HTML o JavaScript pericoloso\n * @param {string} input - Stringa da validare\n * @returns {boolean} - true se contiene contenuto pericoloso\n */\nexport const containsDangerousContent = (input) => {\n  if (!input || typeof input !== 'string') {\n    return false;\n  }\n\n  // Pattern per rilevare HTML e JavaScript pericoloso\n  const dangerousPatterns = [\n    /<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi, // Script tags\n    /<iframe\\b[^<]*(?:(?!<\\/iframe>)<[^<]*)*<\\/iframe>/gi, // Iframe tags\n    /<object\\b[^<]*(?:(?!<\\/object>)<[^<]*)*<\\/object>/gi, // Object tags\n    /<embed\\b[^<]*(?:(?!<\\/embed>)<[^<]*)*<\\/embed>/gi, // Embed tags\n    /javascript:/gi, // JavaScript protocol\n    /vbscript:/gi, // VBScript protocol\n    /data:/gi, // Data protocol\n    /on\\w+\\s*=/gi, // Event handlers\n    /<.*>/g, // Qualsiasi tag HTML\n  ];\n\n  return dangerousPatterns.some(pattern => pattern.test(input));\n};\n\n/**\n * üõ°Ô∏è Sanitizza input per form di creazione pasti\n * @param {Object} mealData - Dati del pasto da sanitizzare\n * @returns {Object} - Dati sanitizzati\n * \n * Nota: I campi numerici (es. estimatedCost, duration, maxParticipants) non vengono sanitizzati\n * perch√© non sono stringhe, ma vengono mantenuti nell'oggetto risultante.\n */\nexport const sanitizeMealData = (mealData) => {\n  const textFields = ['title', 'description', 'language', 'topics'];\n  \n  return sanitizeObject(mealData, textFields, false);\n};\n\n/**\n * üõ°Ô∏è Sanitizza input per profilo utente\n * @param {Object} profileData - Dati del profilo da sanitizzare\n * @returns {Object} - Dati sanitizzati\n */\nexport const sanitizeProfileData = (profileData) => {\n  const textFields = ['nickname', 'bio', 'interests', 'languages', 'preferredCuisine'];\n  \n  return sanitizeObject(profileData, textFields, false);\n};\n\n/**\n * üõ°Ô∏è Sanitizza input per messaggi chat\n * @param {Object} messageData - Dati del messaggio da sanitizzare\n * @returns {Object} - Dati sanitizzati\n */\nexport const sanitizeMessageData = (messageData) => {\n  const textFields = ['content'];\n  \n  return sanitizeObject(messageData, textFields, false);\n};\n\n// Esporta tutte le funzioni\nexport default {\n  sanitizeString,\n  sanitizeObject,\n  sanitizeArray,\n  containsDangerousContent,\n  sanitizeMealData,\n  sanitizeProfileData,\n  sanitizeMessageData,\n};\n"],"names":["FlyToMarker","_ref","position","zoom","map","useMap","useEffect","lat","lng","targetZoom","getZoom","flyTo","duration","CenterUpdater","_ref2","center","Array","isArray","length","LocationPicker","_ref3","onLocationSelect","onMapClick","useMapEvents","click","e","latlng","L","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","_ref4","meals","markers","onMarkerClick","selectedLocation","userLocation","height","width","window","console","log","error","_jsx","style","children","_jsxs","MapContainer","borderRadius","whenReady","whenCreated","mapInstance","TileLayer","url","attribution","errorTileUrl","Marker","icon","iconSize","iconAnchor","popupAnchor","shadowSize","Popup","address","concat","toFixed","marker","eventHandlers","id","minWidth","margin","color","title","name","price","type","meal","restaurant","participants","date","onClick","open","background","border","padding","cursor","marginTop","_excluded","Row","React","ref","bsPrefix","className","as","Component","props","_objectWithoutProperties","decoratedBsPrefix","useBootstrapPrefix","breakpoints","useBootstrapBreakpoints","minBreakpoint","useBootstrapMinBreakpoint","sizePrefix","classes","forEach","brkPoint","propValue","cols","infix","push","_objectSpread","classNames","displayName","navigate","useNavigate","handleBack","styles","FaArrowLeft","marginRight","CameraSource","CameraDirection","CameraResultType","CameraWeb","WebPlugin","getPhoto","options","Promise","async","resolve","reject","webUseInput","source","Photos","this","fileInputExperience","Prompt","actionSheet","document","querySelector","createElement","body","appendChild","header","promptLabelHeader","cancelable","promptLabelPhoto","promptLabelPicture","addEventListener","detail","cameraExperience","pickImages","_options","multipleFileInputExperience","customElements","get","cameraModal","facingMode","direction","Front","componentOnReady","photo","CapacitorException","Error","_getCameraPhoto","dismiss","removeChild","present","input","cleanup","_a","parentNode","hidden","_e","file","files","format","resultType","reader","FileReader","dataUrl","result","b64","split","base64String","readAsDataURL","webPath","URL","createObjectURL","accept","capture","removeAttribute","Rear","multiple","photos","i","saved","onloadend","r","onerror","checkPermissions","navigator","permissions","unavailable","camera","query","state","requestPermissions","unimplemented","pickLimitedLibraryPhotos","getLimitedLibraryPhotos","Camera","registerPlugin","web","topics","setTopics","onValidationChange","inputValue","setInputValue","useState","setError","cleanTopics","hasValidTopics","every","topic","trimmedTopic","trim","test","cleanedTopics","filter","index","removeTopic","topicToRemove","value","onChange","target","onKeyDown","key","preventDefault","validation","isValid","some","existingTopic","toLowerCase","validateTopic","limitError","warn","placeholder","disabled","languageOptions","_formData$location","initialData","onSubmit","onCancel","isLoading","isSubmitting","submitButtonText","t","useTranslation","durationOptions","label","formData","setFormData","getInitialState","now","Date","suggestedDate","getTime","year","getFullYear","month","String","getMonth","padStart","day","getDate","hours","getHours","minutes","getMinutes","description","mealType","maxParticipants","language","location","isPublic","estimatedCost","imageFile","setImageFile","imagePreview","setImagePreview","imageBase64","setImageBase64","errors","setErrors","setSelectedLocation","coordinates","validateField","containsDangerousContent","selectedDate","toleranceMs","handleChange","prev","handleBlur","handleAddressBlur","response","fetch","encodeURIComponent","headers","data","json","parseFloat","lon","display_name","geocodeAddress","processImageFile","fileName","arguments","undefined","startsWith","size","alert","onload","processedFile","blob","compressImageBlob","maxWidth","quality","File","base64","blobToBase64","_","handleCameraSelect","permissionStatus","requestResult","image","allowEditing","DataUrl","imageBitmap","createImageBitmap","scale","Math","min","targetWidth","round","targetHeight","canvas","getContext","drawImage","toDataURL","res","Form","newErrors","Object","keys","sanitizedData","sanitizeMealData","formDataToSend","FormData","dataToProcess","toISOString","append","JSON","stringify","form","formGroup","formLabel","typeSelector","typeButton","active","typeIcon","typeText","typeDescription","typeInfo","visibilitySelector","visibilityButton","visibilityIcon","visibilityText","visibilityDescription","visibilityInfo","Group","Label","Control","formControl","onBlur","required","rows","Col","md","Select","formSelect","mealTypeOptions","opt","max","xs","lang","Text","dateInputContainer","getMinValidDateTime","minValidDate","dateHelperButton","formattedDate","OpenStreetMapComponent","finalAddress","backgroundColor","fontSize","TopicInput","newTopics","src","alt","Capacitor","isNativePlatform","Button","variant","_Fragment","event","display","alignItems","justifyContent","stickyActions","submitButton","Spinner","animation","PURIFY_CONFIG","ALLOWED_TAGS","ALLOWED_ATTR","ALLOW_DATA_ATTR","ALLOW_UNKNOWN_PROTOCOLS","RETURN_DOM","RETURN_DOM_FRAGMENT","RETURN_TRUSTED_TYPE","KEEP_CONTENT","IN_PLACE","SANITIZE_DOM","WHOLE_DOCUMENT","RETURN_DOM_IMPORT","FORCE_BODY","SANITIZE_NAMED_PROPS","ALLOWED_URI_REGEXP","sanitizeString","allowBasicFormatting","config","DOMPurify","sanitize","sanitizeObject","obj","textFields","sanitized","field","pattern","mealData"],"ignoreList":[],"sourceRoot":""}